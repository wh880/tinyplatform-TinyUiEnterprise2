jQuery.cookie=function(w,p,a){if(typeof p!="undefined"){a=a||{};if(p===null){p="";a.expires=-1}var t="";if(a.expires&&(typeof a.expires=="number"||a.expires.toUTCString)){var s;if(typeof a.expires=="number"){s=new Date();s.setTime(s.getTime()+(a.expires*24*60*60*1000))}else{s=a.expires}t="; expires="+s.toUTCString()}var e=a.path?"; path="+(a.path):"";var r=a.domain?"; domain="+(a.domain):"";var x=a.secure?"; secure":"";document.cookie=[w,"=",encodeURIComponent(p),t,e,r,x].join("")}else{var u=null;if(document.cookie&&document.cookie!=""){var i=document.cookie.split(";");for(var q=0;q<i.length;q++){var v=jQuery.trim(i[q]);if(v.substring(0,w.length+1)==(w+"=")){u=decodeURIComponent(v.substring(w.length+1));break}}}return u}};(function(d){d.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};function a(c){if(typeof c.data!=="string"){return}var e=c.handler,b=c.data.toLowerCase().split(" ");c.handler=function(s){if(this!==s.target&&(/textarea|select/i.test(s.target.nodeName)||s.target.type==="text")){return}var g=s.type!=="keypress"&&d.hotkeys.specialKeys[s.which],r=String.fromCharCode(s.which).toLowerCase(),u,t="",i={};if(s.altKey&&g!=="alt"){t+="alt+"}if(s.ctrlKey&&g!=="ctrl"){t+="ctrl+"}if(s.metaKey&&!s.ctrlKey&&g!=="meta"){t+="meta+"}if(s.shiftKey&&g!=="shift"){t+="shift+"}if(g){i[t+g]=true}else{i[t+r]=true;i[t+d.hotkeys.shiftNums[r]]=true;if(t==="shift+"){i[d.hotkeys.shiftNums[r]]=true}}for(var f=0,l=b.length;f<l;f++){if(i[b[f]]){return e.apply(this,arguments)}}}}d.each(["keydown","keyup","keypress"],function(){d.event.special[this]={add:a}})})(jQuery);(function(){var d,e,f,g,a,b={}.hasOwnProperty,c=function(h,j){function i(){this.constructor=h}for(var k in j){b.call(j,k)&&(h[k]=j[k])}return i.prototype=j.prototype,h.prototype=new i,h.__super__=j.prototype,h};g=function(){function h(){this.options_index=0,this.parsed=[]}return h.prototype.add_node=function(i){return"OPTGROUP"===i.nodeName.toUpperCase()?this.add_group(i):this.add_option(i)},h.prototype.add_group=function(o){var i,j,k,l,m,n;for(i=this.parsed.length,this.parsed.push({array_index:i,group:!0,label:this.escapeExpression(o.label),children:0,disabled:o.disabled,title:o.title,search_keys:d.trim(o.getAttribute("data-keys")||"").replace(/,/," ")}),m=o.childNodes,n=[],k=0,l=m.length;l>k;k++){j=m[k],n.push(this.add_option(j,i,o.disabled))}return n},h.prototype.add_option=function(j,k,i){return"OPTION"===j.nodeName.toUpperCase()?(""!==j.text?(null!=k&&(this.parsed[k].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:j.value,text:j.text,title:j.title,html:j.innerHTML,selected:j.selected,disabled:i===!0?i:j.disabled,group_array_index:k,classes:j.className,style:j.style.cssText,search_keys:d.trim(j.getAttribute("data-keys")||"").replace(/,/," ")})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},h.prototype.escapeExpression=function(j){var k,i;return null==j||j===!1?"":/[\&\<\>\"\'\`]/.test(j)?(k={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,j.replace(i,function(l){return k[l]||"&amp;"})):j},h}(),g.select_to_array=function(l){var m,h,i,j,k;for(h=new g,k=l.childNodes,i=0,j=k.length;j>i;i++){m=k[i],h.add_node(m)}return h.parsed},e=function(){function h(j,i){this.form_field=j,this.options=null!=i?i:{},h.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return h.prototype.set_default_values=function(){var i=this;return this.click_test_action=function(j){return i.test_active_click(j)},this.activate_action=function(j){return i.activate_field(j)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},h.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||h.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||h.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||h.default_no_result_text},h.prototype.mouse_enter=function(){return this.mouse_on_container=!0},h.prototype.mouse_leave=function(){return this.mouse_on_container=!1},h.prototype.input_focus=function(i){var j=this;if(this.is_multiple){if(!this.active_field){return setTimeout(function(){return j.container_mousedown()},50)}}else{if(!this.active_field){return this.activate_field()}}},h.prototype.input_blur=function(i){var j=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return j.blur_test()},100))},h.prototype.results_option_build=function(n){var l,i,j,k,m;for(l="",m=this.results_data,j=0,k=m.length;k>j;j++){i=m[j],l+=i.group?this.result_add_group(i):this.result_add_option(i),(null!=n?n.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(i.text))}return l},h.prototype.result_add_option=function(j){var k,i;return j.search_match&&this.include_option_in_results(j)?(k=[],j.disabled||j.selected&&this.is_multiple||k.push("active-result"),!j.disabled||j.selected&&this.is_multiple||k.push("disabled-result"),j.selected&&k.push("result-selected"),null!=j.group_array_index&&k.push("group-option"),""!==j.classes&&k.push(j.classes),i=document.createElement("li"),i.className=k.join(" "),i.style.cssText=j.style,i.title=j.title,i.setAttribute("data-option-array-index",j.array_index),i.innerHTML=j.search_text,this.outerHTML(i)):""},h.prototype.result_add_group=function(i){var j;return(i.search_match||i.group_match)&&i.active_options>0?(j=document.createElement("li"),j.className="group-result",j.title=i.title,j.innerHTML=i.search_text,this.outerHTML(j)):""},h.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},h.prototype.reset_single_select_options=function(){var j,l,i,k,m;for(k=this.results_data,m=[],l=0,i=k.length;i>l;l++){j=k[l],m.push(j.selected?j.selected=!1:void 0)}return m},h.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},h.prototype.results_search=function(i){return this.results_showing?this.winnow_results():this.results_show()},h.prototype.winnow_results=function(){var l,m,n,o,C,D,E,F,G,H,i,j,k;for(this.no_results_clear(),C=0,E=this.get_search_text(),l=E.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),o=this.search_contains?"":"^",n=new RegExp(o+l,"i"),H=new RegExp(l,"i"),k=this.results_data,i=0,j=k.length;j>i;i++){m=k[i],m.search_match=!1,D=null,this.include_option_in_results(m)&&(m.group&&(m.group_match=!1,m.active_options=0),null!=m.group_array_index&&this.results_data[m.group_array_index]&&(D=this.results_data[m.group_array_index],0===D.active_options&&D.search_match&&(C+=1),D.active_options+=1),(!m.group||this.group_search)&&(m.search_text=m.group?m.label:m.html,m.search_keys_match=this.search_string_match(m.search_keys,n),m.search_text_match=this.search_string_match(m.search_text,n),m.search_match=m.search_text_match||m.search_keys_match,m.search_match&&!m.group&&(C+=1),m.search_match?(m.search_text_match&&m.search_text.length?(F=m.search_text.search(H),G=m.search_text.substr(0,F+E.length)+"</em>"+m.search_text.substr(F+E.length),m.search_text=G.substr(0,F)+"<em>"+G.substr(F)):m.search_keys_match&&m.search_keys.length&&(F=m.search_keys.search(H),G=m.search_keys.substr(0,F+E.length)+"</em>"+m.search_keys.substr(F+E.length),m.search_text+='&nbsp; <small style="opacity: 0.7">'+G.substr(0,F)+"<em>"+G.substr(F)+"</small>"),null!=D&&(D.group_match=!0)):null!=m.group_array_index&&this.results_data[m.group_array_index].search_match&&(m.search_match=!0)))}return this.result_clear_highlight(),1>C&&E.length?(this.update_results_content(""),this.no_results(E)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},h.prototype.search_string_match=function(n,l){var i,j,k,m;if(l.test(n)){return !0}if(this.enable_split_word_search&&(n.indexOf(" ")>=0||0===n.indexOf("["))&&(j=n.replace(/\[|\]/g,"").split(" "),j.length)){for(k=0,m=j.length;m>k;k++){if(i=j[k],l.test(i)){return !0}}}},h.prototype.choices_count=function(){var i,k,j,l;if(null!=this.selected_option_count){return this.selected_option_count}for(this.selected_option_count=0,l=this.form_field.options,k=0,j=l.length;j>k;k++){i=l[k],i.selected&&""!=i.value&&(this.selected_option_count+=1)}return this.selected_option_count},h.prototype.choices_click=function(i){return i.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},h.prototype.keyup_checker=function(j){var k,i;switch(k=null!=(i=j.which)?i:j.keyCode,this.search_field_scale(),k){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0){return this.keydown_backstroke()}if(!this.pending_backstroke){return this.result_clear_highlight(),this.results_search()}break;case 13:if(j.preventDefault(),this.results_showing){return this.result_select(j)}break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},h.prototype.clipboard_event_checker=function(i){var j=this;return setTimeout(function(){return j.results_search()},50)},h.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},h.prototype.include_option_in_results=function(i){return this.is_multiple&&!this.display_selected_options&&i.selected?!1:!this.display_disabled_options&&i.disabled?!1:i.empty?!1:!0},h.prototype.search_results_touchstart=function(i){return this.touch_started=!0,this.search_results_mouseover(i)},h.prototype.search_results_touchmove=function(i){return this.touch_started=!1,this.search_results_mouseout(i)},h.prototype.search_results_touchend=function(i){return this.touch_started?this.search_results_mouseup(i):void 0},h.prototype.outerHTML=function(i){var j;return i.outerHTML?i.outerHTML:(j=document.createElement("div"),j.appendChild(i),j.innerHTML)},h.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},h.default_multiple_text="",h.default_single_text="",h.default_no_result_text="No results match",h}(),d=jQuery,d.fn.extend({chosen:function(h){return e.browser_is_supported()?this.each(function(k){var i,j;i=d(this),j=i.data("chosen"),"destroy"===h&&j?j.destroy():j||i.data("chosen",new f(this,h))}):this}}),f=function(i){function h(){return a=h.__super__.constructor.apply(this,arguments)}return c(h,i),h.prototype.setup=function(){return this.form_field_jq=d(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},h.prototype.set_up_html=function(){var j,k;j=["chosen-container"],j.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&j.push(this.form_field.className),this.is_rtl&&j.push("chosen-rtl");var l=this.form_field.getAttribute("data-css-class");return l&&j.push(l),k={"class":j.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(k.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=d("<div />",k),this.container.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.options.drop_width&&this.dropdown.css("width",this.options.drop_width).addClass("chosen-drop-size-limited"),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},h.prototype.register_observers=function(){var j=this;return this.container.bind("mousedown.chosen",function(k){j.container_mousedown(k)}),this.container.bind("mouseup.chosen",function(k){j.container_mouseup(k)}),this.container.bind("mouseenter.chosen",function(k){j.mouse_enter(k)}),this.container.bind("mouseleave.chosen",function(k){j.mouse_leave(k)}),this.search_results.bind("mouseup.chosen",function(k){j.search_results_mouseup(k)}),this.search_results.bind("mouseover.chosen",function(k){j.search_results_mouseover(k)}),this.search_results.bind("mouseout.chosen",function(k){j.search_results_mouseout(k)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(k){j.search_results_mousewheel(k)}),this.search_results.bind("touchstart.chosen",function(k){j.search_results_touchstart(k)}),this.search_results.bind("touchmove.chosen",function(k){j.search_results_touchmove(k)}),this.search_results.bind("touchend.chosen",function(k){j.search_results_touchend(k)}),this.form_field_jq.bind("chosen:updated.chosen",function(k){j.results_update_field(k)}),this.form_field_jq.bind("chosen:activate.chosen",function(k){j.activate_field(k)}),this.form_field_jq.bind("chosen:open.chosen",function(k){j.container_mousedown(k)}),this.form_field_jq.bind("chosen:close.chosen",function(k){j.input_blur(k)}),this.search_field.bind("blur.chosen",function(k){j.input_blur(k)}),this.search_field.bind("keyup.chosen",function(k){j.keyup_checker(k)}),this.search_field.bind("keydown.chosen",function(k){j.keydown_checker(k)}),this.search_field.bind("focus.chosen",function(k){j.input_focus(k)}),this.search_field.bind("cut.chosen",function(k){j.clipboard_event_checker(k)}),this.search_field.bind("paste.chosen",function(k){j.clipboard_event_checker(k)}),this.is_multiple?this.search_choices.bind("click.chosen",function(k){j.choices_click(k)}):this.container.bind("click.chosen",function(k){k.preventDefault()})},h.prototype.destroy=function(){return d(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},h.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},h.prototype.container_mousedown=function(j){return this.is_disabled||(j&&"mousedown"===j.type&&!this.results_showing&&j.preventDefault(),null!=j&&d(j.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!j||d(j.target)[0]!==this.selected_item[0]&&!d(j.target).parents("a.chosen-single").length||(j.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),d(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},h.prototype.container_mouseup=function(j){return"ABBR"!==j.target.nodeName||this.is_disabled?void 0:this.results_reset(j)},h.prototype.search_results_mousewheel=function(j){var k;return j.originalEvent&&(k=-j.originalEvent.wheelDelta||j.originalEvent.detail),null!=k?(j.preventDefault(),"DOMMouseScroll"===j.type&&(k=40*k),this.search_results.scrollTop(k+this.search_results.scrollTop())):void 0},h.prototype.blur_test=function(j){return !this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},h.prototype.close_field=function(){return d(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},h.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},h.prototype.test_active_click=function(j){var k;return k=d(j.target).closest(".chosen-container"),k.length&&this.container[0]===k[0]?this.active_field=!0:this.close_field()},h.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=g.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},h.prototype.result_do_highlight=function(o){var m,j,k,l,n;if(o.length){if(this.result_clear_highlight(),this.result_highlight=o,this.result_highlight.addClass("highlighted"),k=parseInt(this.search_results.css("maxHeight"),10),n=this.search_results.scrollTop(),l=k+n,j=this.result_highlight.position().top+this.search_results.scrollTop(),m=j+this.result_highlight.outerHeight(),m>=l){return this.search_results.scrollTop(m-k>0?m-k:0)}if(n>j){return this.search_results.scrollTop(j)}}},h.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},h.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},h.prototype.update_results_content=function(j){return this.search_results.html(j)},h.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},h.prototype.set_tab_index=function(j){var k;return this.form_field.tabIndex?(k=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=k):void 0},h.prototype.set_label_behavior=function(){var j=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=d("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(k){return j.is_multiple?j.container_mousedown(k):j.activate_field()}):void 0},h.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},h.prototype.search_results_mouseup=function(j){var k;return k=d(j.target).hasClass("active-result")?d(j.target):d(j.target).parents(".active-result").first(),k.length?(this.result_highlight=k,this.result_select(j),this.search_field.focus()):void 0},h.prototype.search_results_mouseover=function(j){var k;return k=d(j.target).hasClass("active-result")?d(j.target):d(j.target).parents(".active-result").first(),k?this.result_do_highlight(k):void 0},h.prototype.search_results_mouseout=function(j){return d(j.target).hasClass("active-result")?this.result_clear_highlight():void 0},h.prototype.choice_build=function(k){var j,l,m=this;return j=d("<li />",{"class":"search-choice"}).html("<span title='"+k.html+"'>"+k.html+"</span>"),k.disabled?j.addClass("search-choice-disabled"):(l=d("<a />",{"class":"search-choice-close","data-option-array-index":k.array_index}),l.bind("click.chosen",function(n){return m.choice_destroy_link_click(n)}),j.append(l)),this.search_container.before(j)},h.prototype.choice_destroy_link_click=function(j){return j.preventDefault(),j.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(d(j.target))},h.prototype.choice_destroy=function(j){return this.result_deselect(j[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),j.parents("li").first().remove(),this.search_field_scale()):void 0},h.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},h.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},h.prototype.result_select=function(l){var j,k;return this.result_highlight?(j=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?j.removeClass("active-result"):this.reset_single_select_options(),k=this.results_data[j[0].getAttribute("data-option-array-index")],k.selected=!0,this.form_field.options[k.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(k):this.single_set_selected_text(k.text),(l.metaKey||l.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[k.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},h.prototype.single_set_selected_text=function(j){return null==j&&(j=this.default_text),j===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").attr("title",j).text(j)},h.prototype.result_deselect=function(j){var k;return k=this.results_data[j],this.form_field.options[k.options_index].disabled?!1:(k.selected=!1,this.form_field.options[k.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[k.options_index].value}),this.search_field_scale(),!0)},h.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},h.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":d("<div/>").text(d.trim(this.search_field.val())).html()},h.prototype.winnow_results_set_highlight=function(){var j,k;return k=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),j=k.length?k.first():this.search_results.find(".active-result").first(),null!=j?this.result_do_highlight(j):void 0},h.prototype.no_results=function(j){var k;return k=d('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),k.find("span").first().html(j),this.search_results.append(k),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},h.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},h.prototype.keydown_arrow=function(){var j;return this.results_showing&&this.result_highlight?(j=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(j):void 0:this.results_show()},h.prototype.keyup_arrow=function(){var j;return this.results_showing||this.is_multiple?this.result_highlight?(j=this.result_highlight.prevAll("li.active-result"),j.length?this.result_do_highlight(j.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},h.prototype.keydown_backstroke=function(){var j;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(j=this.search_container.siblings("li.search-choice").last(),j.length&&!j.hasClass("search-choice-disabled")?(this.pending_backstroke=j,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},h.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},h.prototype.keydown_checker=function(l){var j,k;switch(j=null!=(k=l.which)?k:l.keyCode,this.search_field_scale(),8!==j&&this.pending_backstroke&&this.clear_backstroke(),j){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(l),this.mouse_on_container=!1;break;case 13:l.preventDefault();break;case 38:l.preventDefault(),this.keyup_arrow();break;case 40:l.preventDefault(),this.keydown_arrow()}},h.prototype.search_field_scale=function(){var m,n,o,y,z,A,j,k,l;if(this.is_multiple){for(o=0,j=0,z="position:absolute; left: -1000px; top: -1000px; display:none;",A=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],k=0,l=A.length;l>k;k++){y=A[k],z+=y+":"+this.search_field.css(y)+";"}return m=d("<div />",{style:z}),m.text(this.search_field.val()),d("body").append(m),j=m.width()+25,m.remove(),n=this.container.outerWidth(),j>n-10&&(j=n-10),this.search_field.css({width:j+"px"})}},h}(e)}).call(this);(function(a){a.extend(a.fn,{swapClass:function(b,c){var e=this.filter("."+b);this.filter("."+c).removeClass(c).addClass(b);e.removeClass(b).addClass(c);return this},replaceClass:function(b,c){return this.filter("."+b).removeClass(b).addClass(c).end()},hoverClass:function(b){b=b||"hover";return this.hover(function(){a(this).addClass(b)},function(){a(this).removeClass(b)})},heightToggle:function(c,b){c?this.animate({height:"toggle"},c,b):this.each(function(){jQuery(this)[jQuery(this).css("display")=="none"?"show":"hide"]();if(b){b.apply(this,arguments)}})},heightHide:function(c,b){if(c){this.animate({height:"hide"},c,b)}else{this.hide();if(b){this.each(b)}}},prepareBranches:function(b){if(!b.prerendered){this.filter(":last-child:not(ul)").addClass(d.last);this.filter((b.collapsed?"":"."+d.closed)+":not(."+d.open+")").find(">ul").hide()}return this.filter(":has(>ul)")},applyClasses:function(c,b){this.filter(":has(>ul):not(:has(>a))").find(">span").click(function(e){b.apply(a(this).next())}).add(a("a",this)).hoverClass();if(!c.prerendered){this.filter(":has(>ul:hidden)").addClass(d.expandable).replaceClass(d.last,d.lastExpandable);this.not(":has(>ul:hidden)").addClass(d.collapsable).replaceClass(d.last,d.lastCollapsable);this.prepend('<div class="'+d.hitarea+'"/>').find("div."+d.hitarea).each(function(){var e="";a.each(a(this).parent().attr("class").split(" "),function(){e+=this+"-hitarea "});a(this).addClass(e)})}this.find("div."+d.hitarea).click(b)},treeview:function(r){r=a.extend({cookieId:"treeview"},r);if(r.add){return this.trigger("add",[r.add])}if(r.toggle){var e=r.toggle;r.toggle=function(){return e.apply(a(this).parent()[0],arguments)}}function s(h,f){function g(j){return function(){p.apply(a("div."+d.hitarea,h).filter(function(){return j?a(this).parent("."+j).length:true}));return false}}a("a:eq(0)",f).click(g(d.collapsable));a("a:eq(1)",f).click(g(d.expandable));a("a:eq(2)",f).click(g())}function p(){a(this).parent().find(">.hitarea").swapClass(d.collapsableHitarea,d.expandableHitarea).swapClass(d.lastCollapsableHitarea,d.lastExpandableHitarea).end().swapClass(d.collapsable,d.expandable).swapClass(d.lastCollapsable,d.lastExpandable).find(">ul").heightToggle(r.animated,r.toggle);if(r.unique){a(this).parent().siblings().find(">.hitarea").replaceClass(d.collapsableHitarea,d.expandableHitarea).replaceClass(d.lastCollapsableHitarea,d.lastExpandableHitarea).end().replaceClass(d.collapsable,d.expandable).replaceClass(d.lastCollapsable,d.lastExpandable).find(">ul").heightHide(r.animated,r.toggle)}}function b(){function f(h){return h?1:0}var g=[];c.each(function(j,h){g[j]=a(h).is(":has(>ul:visible)")?1:0});a.cookie(r.cookieId,g.join(""))}function q(){var g=a.cookie(r.cookieId);if(g){var f=g.split("");c.each(function(j,h){a(h).find(">ul")[parseInt(f[j])?"show":"hide"]()})}}this.addClass("treeview");var c=this.find("li").prepareBranches(r);switch(r.persist){case"cookie":var i=r.toggle;r.toggle=function(){b();if(i){i.apply(this,arguments)}};q();break;case"location":var o=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()});if(o.length){o.addClass("selected").parents("ul, li").add(o.next()).show()}break}c.applyClasses(r,p);if(r.control){s(this,r.control);a(r.control).show()}return this.bind("add",function(f,g){a(g).prev().removeClass(d.last).removeClass(d.lastCollapsable).removeClass(d.lastExpandable).find(">.hitarea").removeClass(d.lastCollapsableHitarea).removeClass(d.lastExpandableHitarea);a(g).find("li").andSelf().prepareBranches(r).applyClasses(r,p)})}});var d=a.fn.treeview.classes={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"};a.fn.Treeview=a.fn.treeview})(jQuery);
/*!
 * ZUI - v1.3.1 - 2015-05-19
 * http://zui.sexy
 * GitHub: https://github.com/easysoft/zui.git 
 * Copyright (c) 2015 cnezsoft.com; Licensed MIT
 */
(function(r){var s=r&&r.zui?r.zui:this,t=(s.Chart,function(L){this.canvas=L.canvas,this.ctx=L;var M=function(N,O){return N["offset"+O]?N["offset"+O]:document.defaultView.getComputedStyle(N).getPropertyValue(O)},J=this.width=M(L.canvas,"Width"),K=this.height=M(L.canvas,"Height");L.canvas.width=J,L.canvas.height=K;var J=this.width=L.canvas.width,K=this.height=L.canvas.height;return this.aspectRatio=this.width/this.height,u.retinaScale(this),this});t.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},t.types={};var u=t.helpers={},v=u.each=function(N,O,J){var K=Array.prototype.slice.call(arguments,3);if(N){if(N.length===+N.length){var L;for(L=0;L<N.length;L++){O.apply(J,[N[L],L].concat(K))}}else{for(var M in N){O.apply(J,[N[M],M].concat(K))}}}},w=u.clone=function(J){var K={};return v(J,function(M,L){J.hasOwnProperty(L)&&(K[L]=M)}),K},x=u.extend=function(J){return v(Array.prototype.slice.call(arguments,1),function(K){v(K,function(L,M){K.hasOwnProperty(M)&&(J[M]=L)})}),J},y=u.merge=function(K,L){var J=Array.prototype.slice.call(arguments,0);return J.unshift({}),x.apply(null,J)},z=u.indexOf=function(K,L){if(Array.prototype.indexOf){return K.indexOf(L)}for(var J=0;J<K.length;J++){if(K[J]===L){return J}}return -1},A=(u.where=function(K,L){var J=[];return u.each(K,function(M){L(M)&&J.push(M)}),J},u.findNextWhere=function(M,N,J){J||(J=-1);for(var K=J+1;K<M.length;K++){var L=M[K];if(N(L)){return L}}},u.findPreviousWhere=function(M,N,J){J||(J=M.length);for(var K=J-1;K>=0;K--){var L=M[K];if(N(L)){return L}}},u.inherits=function(L){var M=this,J=L&&L.hasOwnProperty("constructor")?L.constructor:function(){return M.apply(this,arguments)},K=function(){this.constructor=J};return K.prototype=M.prototype,J.prototype=new K,J.extend=A,L&&x(J.prototype,L),J.__super__=M.prototype,J}),B=u.noop=function(){},C=u.uid=function(){var J=0;return function(){return"chart-"+J++}}(),D=u.warn=function(J){window.console&&"function"==typeof window.console.warn&&console.warn(J)},E=u.amd="function"==typeof define&&define.amd,F=u.isNumber=function(J){return !isNaN(parseFloat(J))&&isFinite(J)},G=u.max=function(J){return Math.max.apply(Math,J)},I=u.min=function(J){return Math.min.apply(Math,J)},b=(u.cap=function(K,L,J){if(F(L)){if(K>L){return L}}else{if(F(J)&&J>K){return J}}return K},u.getDecimalPlaces=function(J){return J%1!==0&&F(J)?J.toString().split(".")[1].length:0}),d=u.radians=function(J){return J*(Math.PI/180)},f=(u.getAngleFromPoint=function(N,O){var J=O.x-N.x,K=O.y-N.y,L=Math.sqrt(J*J+K*K),M=2*Math.PI+Math.atan2(K,J);return 0>J&&0>K&&(M+=2*Math.PI),{angle:M,distance:L}},u.aliasPixel=function(J){return J%2===0?0:0.5}),h=(u.splineCurve=function(L,M,N,O){var P=Math.sqrt(Math.pow(M.x-L.x,2)+Math.pow(M.y-L.y,2)),Q=Math.sqrt(Math.pow(N.x-M.x,2)+Math.pow(N.y-M.y,2)),J=O*P/(P+Q),K=O*Q/(P+Q);return{inner:{x:M.x-J*(N.x-L.x),y:M.y-J*(N.y-L.y)},outer:{x:M.x+K*(N.x-L.x),y:M.y+K*(N.y-L.y)}}},u.calculateOrderOfMagnitude=function(J){return Math.floor(Math.log(J)/Math.LN10)}),j=(u.calculateScaleRange=function(W,Y,Z,J,L){var N=2,O=Math.floor(Y/(1.5*Z)),P=N>=O,Q=G(W),R=I(W);Q===R&&(Q+=0.5,R>=0.5&&!J?R-=0.5:Q+=0.5);for(var S=Math.abs(Q-R),U=h(S),V=Math.ceil(Q/(1*Math.pow(10,U)))*Math.pow(10,U),X=J?0:Math.floor(R/(1*Math.pow(10,U)))*Math.pow(10,U),K=V-X,M=Math.pow(10,U),T=Math.round(K/M);(T>O||O>2*T)&&!P;){if(T>O){M*=2,T=Math.round(K/M),T%1!==0&&(P=!0)}else{if(L&&U>=0){if(M/2%1!==0){break}M/=2,T=Math.round(K/M)}else{M/=2,T=Math.round(K/M)}}}return P&&(T=N,M=K/T),{steps:T,stepValue:M,min:X,max:X+T*M}},u.template=function(L,M){function J(O,P){var N=/\W/.test(O)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+O.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):K[O]=K[O];return P?N(P):N}if(L instanceof Function){return L(M)}var K={};return J(L,M)}),l=(u.generateLabels=function(M,N,J,K){var L=new Array(N);return labelTemplateString&&v(L,function(P,O){L[O]=j(M,{value:J+K*(O+1)})}),L},u.easingEffects={linear:function(J){return J},easeInQuad:function(J){return J*J},easeOutQuad:function(J){return -1*J*(J-2)},easeInOutQuad:function(J){return(J/=0.5)<1?0.5*J*J:-0.5*(--J*(J-2)-1)},easeInCubic:function(J){return J*J*J},easeOutCubic:function(J){return 1*((J=J/1-1)*J*J+1)},easeInOutCubic:function(J){return(J/=0.5)<1?0.5*J*J*J:0.5*((J-=2)*J*J+2)},easeInQuart:function(J){return J*J*J*J},easeOutQuart:function(J){return -1*((J=J/1-1)*J*J*J-1)},easeInOutQuart:function(J){return(J/=0.5)<1?0.5*J*J*J*J:-0.5*((J-=2)*J*J*J-2)},easeInQuint:function(J){return 1*(J/=1)*J*J*J*J},easeOutQuint:function(J){return 1*((J=J/1-1)*J*J*J*J+1)},easeInOutQuint:function(J){return(J/=0.5)<1?0.5*J*J*J*J*J:0.5*((J-=2)*J*J*J*J+2)},easeInSine:function(J){return -1*Math.cos(J/1*(Math.PI/2))+1},easeOutSine:function(J){return 1*Math.sin(J/1*(Math.PI/2))},easeInOutSine:function(J){return -0.5*(Math.cos(Math.PI*J/1)-1)},easeInExpo:function(J){return 0===J?1:1*Math.pow(2,10*(J/1-1))},easeOutExpo:function(J){return 1===J?1:1*(-Math.pow(2,-10*J/1)+1)},easeInOutExpo:function(J){return 0===J?0:1===J?1:(J/=0.5)<1?0.5*Math.pow(2,10*(J-1)):0.5*(-Math.pow(2,-10*--J)+2)},easeInCirc:function(J){return J>=1?J:-1*(Math.sqrt(1-(J/=1)*J)-1)},easeOutCirc:function(J){return 1*Math.sqrt(1-(J=J/1-1)*J)},easeInOutCirc:function(J){return(J/=0.5)<1?-0.5*(Math.sqrt(1-J*J)-1):0.5*(Math.sqrt(1-(J-=2)*J)+1)},easeInElastic:function(L){var M=1.70158,J=0,K=1;return 0===L?0:1==(L/=1)?1:(J||(J=0.3),K<Math.abs(1)?(K=1,M=J/4):M=J/(2*Math.PI)*Math.asin(1/K),-(K*Math.pow(2,10*(L-=1))*Math.sin(2*(1*L-M)*Math.PI/J)))},easeOutElastic:function(L){var M=1.70158,J=0,K=1;return 0===L?0:1==(L/=1)?1:(J||(J=0.3),K<Math.abs(1)?(K=1,M=J/4):M=J/(2*Math.PI)*Math.asin(1/K),K*Math.pow(2,-10*L)*Math.sin(2*(1*L-M)*Math.PI/J)+1)},easeInOutElastic:function(L){var M=1.70158,J=0,K=1;return 0===L?0:2==(L/=0.5)?1:(J||(J=0.3*1.5),K<Math.abs(1)?(K=1,M=J/4):M=J/(2*Math.PI)*Math.asin(1/K),1>L?-0.5*K*Math.pow(2,10*(L-=1))*Math.sin(2*(1*L-M)*Math.PI/J):K*Math.pow(2,-10*(L-=1))*Math.sin(2*(1*L-M)*Math.PI/J)*0.5+1)},easeInBack:function(J){var K=1.70158;return 1*(J/=1)*J*((K+1)*J-K)},easeOutBack:function(J){var K=1.70158;return 1*((J=J/1-1)*J*((K+1)*J+K)+1)},easeInOutBack:function(J){var K=1.70158;return(J/=0.5)<1?0.5*J*J*(((K*=1.525)+1)*J-K):0.5*((J-=2)*J*(((K*=1.525)+1)*J+K)+2)},easeInBounce:function(J){return 1-l.easeOutBounce(1-J)},easeOutBounce:function(J){return(J/=1)<1/2.75?7.5625*J*J:2/2.75>J?1*(7.5625*(J-=1.5/2.75)*J+0.75):2.5/2.75>J?1*(7.5625*(J-=2.25/2.75)*J+0.9375):1*(7.5625*(J-=2.625/2.75)*J+0.984375)},easeInOutBounce:function(J){return 0.5>J?0.5*l.easeInBounce(2*J):0.5*l.easeOutBounce(2*J-1)+0.5}}),n=u.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(J){return window.setTimeout(J,1000/60)}}(),p=u.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(J){return window.clearTimeout(J,1000/60)}}(),q=(u.animationLoop=function(J,K,L,M,N,O){var P=0,Q=l[L]||l.linear,R=function(){P++;var T=P/K,S=Q(T);J.call(O,S,T,P),M.call(O,S,T),K>P?O.animationFrame=n(R):N.apply(O)};n(R)},u.getRelativePosition=function(N){var O,J,K=N.originalEvent||N,L=N.currentTarget||N.srcElement,M=L.getBoundingClientRect();return K.touches?(O=K.touches[0].clientX-M.left,J=K.touches[0].clientY-M.top):(O=K.clientX-M.left,J=K.clientY-M.top),{x:O,y:J}},u.addEvent=function(K,L,J){K.addEventListener?K.addEventListener(L,J):K.attachEvent?K.attachEvent("on"+L,J):K["on"+L]=J}),H=u.removeEvent=function(K,L,J){K.removeEventListener?K.removeEventListener(L,J,!1):K.detachEvent?K.detachEvent("on"+L,J):K["on"+L]=B},a=(u.bindEvents=function(K,L,J){K.events||(K.events={}),v(L,function(M){K.events[M]=function(){J.apply(K,arguments)},q(K.chart.canvas,M,K.events[M])})},u.unbindEvents=function(J,K){v(K,function(M,L){H(J.chart.canvas,L,M)})}),c=u.getMaximumWidth=function(J){var K=J.parentNode;return K.clientWidth},e=u.getMaximumHeight=function(J){var K=J.parentNode;return K.clientHeight},g=(u.getMaximumSize=u.getMaximumWidth,u.retinaScale=function(L){var M=L.ctx,J=L.canvas.width,K=L.canvas.height;window.devicePixelRatio&&(M.canvas.style.width=J+"px",M.canvas.style.height=K+"px",M.canvas.height=K*window.devicePixelRatio,M.canvas.width=J*window.devicePixelRatio,M.scale(window.devicePixelRatio,window.devicePixelRatio))}),i=u.clear=function(J){J.ctx.clearRect(0,0,J.width,J.height)},k=u.fontString=function(K,L,J){return L+" "+K+"px "+J},m=u.longestText=function(L,M,J){L.font=M;var K=0;return v(J,function(O){var N=L.measureText(O).width;K=N>K?N:K}),K},o=u.drawRoundedRectangle=function(N,O,J,K,L,M){N.beginPath(),N.moveTo(O+M,J),N.lineTo(O+K-M,J),N.quadraticCurveTo(O+K,J,O+K,J+M),N.lineTo(O+K,J+L-M),N.quadraticCurveTo(O+K,J+L,O+K-M,J+L),N.lineTo(O+M,J+L),N.quadraticCurveTo(O,J+L,O,J+L-M),N.lineTo(O,J+M),N.quadraticCurveTo(O,J,O+M,J),N.closePath()};t.instances={},t.Type=function(K,L,J){this.options=L,this.chart=J,this.id=C(),t.instances[this.id]=this,L.responsive&&this.resize(),this.initialize.call(this,K)},x(t.Type.prototype,{initialize:function(){return this},clear:function(){return i(this.chart),this},stop:function(){return p(this.animationFrame),this},resize:function(L){this.stop();var M=this.chart.canvas,J=c(this.chart.canvas),K=this.options.maintainAspectRatio?J/this.chart.aspectRatio:e(this.chart.canvas);return M.width=this.chart.width=J,M.height=this.chart.height=K,g(this.chart),"function"==typeof L&&L.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:B,render:function(J){return J&&this.reflow(),this.options.animation&&!J?u.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return j(this.options.legendTemplate,this)},destroy:function(){this.clear(),a(this,this.events);var J=this.chart.canvas;J.width=this.chart.width,J.height=this.chart.height,J.style.removeProperty?(J.style.removeProperty("width"),J.style.removeProperty("height")):(J.style.removeAttribute("width"),J.style.removeAttribute("height")),delete t.instances[this.id]},showTooltip:function(Q,R){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var J=function(S){var T=!1;return S.length!==this.activeElements.length?T=!0:(v(S,function(U,V){U!==this.activeElements[V]&&(T=!0)},this),T)}.call(this,Q);if(J||R){if(this.activeElements=Q,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),Q.length>0){if(this.datasets&&this.datasets.length>1){for(var K,L,M=this.datasets.length-1;M>=0&&(K=this.datasets[M].points||this.datasets[M].bars||this.datasets[M].segments,L=z(K,Q[0]),-1===L);M--){}var N=[],O=[],P=function(V){var W,X,Y,Z,aa,S=[],T=[],U=[];return u.each(this.datasets,function(ab){ab.showTooltips!==!1&&(W=ab.points||ab.bars||ab.segments,W[L]&&W[L].hasValue()&&S.push(W[L]))}),u.each(S,function(ab){T.push(ab.x),U.push(ab.y),N.push(u.template(this.options.multiTooltipTemplate,ab)),O.push({fill:ab._saved.fillColor||ab.fillColor,stroke:ab._saved.strokeColor||ab.strokeColor})},this),aa=I(U),Y=G(U),Z=I(T),X=G(T),{x:Z>this.chart.width/2?Z:X,y:(aa+Y)/2}}.call(this,L);new t.MultiTooltip({x:P.x,y:P.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:N,legendColors:O,legendColorBackground:this.options.multiTooltipKeyBackground,title:Q[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else{v(Q,function(S){var T=S.tooltipPosition();new t.Tooltip({x:Math.round(T.x),y:Math.round(T.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:j(this.options.tooltipTemplate,S),chart:this.chart,custom:this.options.customTooltips}).draw()},this)}}return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),t.Type.extend=function(M){var N=this,J=function(){return N.apply(this,arguments)};if(J.prototype=w(N.prototype),x(J.prototype,M),J.extend=t.Type.extend,M.name||N.prototype.name){var K=M.name||N.prototype.name,L=t.defaults[N.prototype.name]?w(t.defaults[N.prototype.name]):{};t.defaults[K]=x(L,M.defaults),t.types[K]=J,t.prototype[K]=function(P,Q){var O=y(t.defaults.global,t.defaults[K],Q||{});return new J(P,O,this)}}else{D("Name not provided for this chart, so it hasn't been registered")}return N},t.Element=function(J){x(this,J),this.initialize.apply(this,arguments),this.save()},x(t.Element.prototype,{initialize:function(){},restore:function(J){return J?v(J,function(K){this[K]=this._saved[K]},this):x(this,this._saved),this},save:function(){return this._saved=w(this),delete this._saved._saved,this},update:function(J){return v(J,function(K,L){this._saved[L]=this[L],this[L]=K},this),this},transition:function(J,K){return v(J,function(L,M){this[M]=(L-this._saved[M])*K+this._saved[M]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return F(this.value)}}),t.Element.extend=A,t.Point=t.Element.extend({display:!0,inRange:function(K,L){var J=this.hitDetectionRadius+this.radius;return Math.pow(K-this.x,2)+Math.pow(L-this.y,2)<Math.pow(J,2)},draw:function(){if(this.display){var J=this.ctx;J.beginPath(),J.arc(this.x,this.y,this.radius,0,2*Math.PI),J.closePath(),J.strokeStyle=this.strokeColor,J.lineWidth=this.strokeWidth,J.fillStyle=this.fillColor,J.fill(),J.stroke()}}}),t.Arc=t.Element.extend({inRange:function(M,N){var J=u.getAngleFromPoint(this,{x:M,y:N}),K=J.angle>=this.startAngle&&J.angle<=this.endAngle,L=J.distance>=this.innerRadius&&J.distance<=this.outerRadius;return K&&L},tooltipPosition:function(){var J=this.startAngle+(this.endAngle-this.startAngle)/2,K=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(J)*K,y:this.y+Math.sin(J)*K}},draw:function(J){var K=this.ctx;K.beginPath(),K.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),K.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),K.closePath(),K.strokeStyle=this.strokeColor,K.lineWidth=this.strokeWidth,K.fillStyle=this.fillColor,K.fill(),K.lineJoin="bevel",this.showStroke&&K.stroke()}}),t.Rectangle=t.Element.extend({draw:function(){var N=this.ctx,O=this.width/2,J=this.x-O,K=this.x+O,L=this.base-(this.base-this.y),M=this.strokeWidth/2;this.showStroke&&(J+=M,K-=M,L+=M),N.beginPath(),N.fillStyle=this.fillColor,N.strokeStyle=this.strokeColor,N.lineWidth=this.strokeWidth,N.moveTo(J,this.base),N.lineTo(J,L),N.lineTo(K,L),N.lineTo(K,this.base),N.fill(),this.showStroke&&N.stroke()},height:function(){return this.base-this.y},inRange:function(J,K){return J>=this.x-this.width/2&&J<=this.x+this.width/2&&K>=this.y&&K<=this.base}}),t.Tooltip=t.Element.extend({draw:function(){var M=this.chart.ctx;M.font=k(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var N=this.caretPadding=2,O=M.measureText(this.text).width+2*this.xPadding,P=this.fontSize+2*this.yPadding,J=P+this.caretHeight+N;this.x+O/2>this.chart.width?this.xAlign="left":this.x-O/2<0&&(this.xAlign="right"),this.y-J<0&&(this.yAlign="below");var K=this.x-O/2,L=this.y-J;if(M.fillStyle=this.fillColor,this.custom){this.custom(this)}else{switch(this.yAlign){case"above":M.beginPath(),M.moveTo(this.x,this.y-N),M.lineTo(this.x+this.caretHeight,this.y-(N+this.caretHeight)),M.lineTo(this.x-this.caretHeight,this.y-(N+this.caretHeight)),M.closePath(),M.fill();break;case"below":L=this.y+N+this.caretHeight,M.beginPath(),M.moveTo(this.x,this.y+N),M.lineTo(this.x+this.caretHeight,this.y+N+this.caretHeight),M.lineTo(this.x-this.caretHeight,this.y+N+this.caretHeight),M.closePath(),M.fill()}switch(this.xAlign){case"left":K=this.x-O+(this.cornerRadius+this.caretHeight);break;case"right":K=this.x-(this.cornerRadius+this.caretHeight)}o(M,K,L,O,P,this.cornerRadius),M.fill(),M.fillStyle=this.textColor,M.textAlign="center",M.textBaseline="middle",M.fillText(this.text,K+O/2,L+P/2)}}}),t.MultiTooltip=t.Element.extend({initialize:function(){this.font=k(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=k(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var L=this.ctx.measureText(this.title).width,M=m(this.ctx,this.font,this.labels)+this.fontSize+3,J=G([M,L]);this.width=J+2*this.xPadding;var K=this.height/2;this.y-K<0?this.y=K:this.y+K>this.chart.height&&(this.y=this.chart.height-K),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(K){var L=this.y-this.height/2+this.yPadding,J=K-1;return 0===K?L+this.titleFontSize/2:L+(1.5*this.fontSize*J+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom){this.custom(this)}else{o(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var J=this.ctx;J.fillStyle=this.fillColor,J.fill(),J.closePath(),J.textAlign="left",J.textBaseline="middle",J.fillStyle=this.titleTextColor,J.font=this.titleFont,J.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),J.font=this.font,u.each(this.labels,function(L,K){J.fillStyle=this.textColor,J.fillText(L,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(K+1)),J.fillStyle=this.legendColorBackground,J.fillRect(this.x+this.xPadding,this.getLineHeight(K+1)-this.fontSize/2,this.fontSize,this.fontSize),J.fillStyle=this.legendColors[K].fill,J.fillRect(this.x+this.xPadding,this.getLineHeight(K+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),t.Scale=t.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var J=b(this.stepValue),K=0;K<=this.steps;K++){this.yLabels.push(j(this.templateString,{value:(this.min+K*this.stepValue).toFixed(J)}))}this.yLabelWidth=this.display&&this.showLabels?m(this.ctx,this.font,this.yLabels):0},addXLabel:function(J){this.xLabels.push(J),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var J,K=this.endPoint-this.startPoint;for(this.calculateYRange(K),this.buildYLabels(),this.calculateXLabelRotation();K>this.endPoint-this.startPoint;){K=this.endPoint-this.startPoint,J=this.yLabelWidth,this.calculateYRange(K),this.buildYLabels(),J<this.yLabelWidth&&this.calculateXLabelRotation()}},calculateXLabelRotation:function(){this.ctx.font=this.font;var M,N,O=this.ctx.measureText(this.xLabels[0]).width,P=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=P/2+3,this.xScalePaddingLeft=O/2>this.yLabelWidth+10?O/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var J,K=m(this.ctx,this.font,this.xLabels);this.xLabelWidth=K;for(var L=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>L&&0===this.xLabelRotation||this.xLabelWidth>L&&this.xLabelRotation<=90&&this.xLabelRotation>0;){J=Math.cos(d(this.xLabelRotation)),M=J*O,N=J*P,M+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=M+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=J*K}this.xLabelRotation>0&&(this.endPoint-=Math.sin(d(this.xLabelRotation))*K+3)}else{this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding}},calculateYRange:B,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(J){var K=this.drawingArea()/(this.min-this.max);return this.endPoint-K*(J-this.min)},calculateX:function(L){var M=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),J=M/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),K=J*L+this.xScalePaddingLeft;return this.offsetGridLines&&(K+=J/2),Math.round(K)},update:function(J){u.extend(this,J),this.fit()},draw:function(){var K=this.ctx,L=(this.endPoint-this.startPoint)/this.steps,J=Math.round(this.xScalePaddingLeft);this.display&&(K.fillStyle=this.textColor,K.font=this.font,v(this.yLabels,function(N,O){var P=this.endPoint-L*O,Q=Math.round(P),M=this.showHorizontalLines;K.textAlign="right",K.textBaseline="middle",this.showLabels&&K.fillText(N,J-10,P),0!==O||M||(M=!0),M&&K.beginPath(),O>0?(K.lineWidth=this.gridLineWidth,K.strokeStyle=this.gridLineColor):(K.lineWidth=this.lineWidth,K.strokeStyle=this.lineColor),Q+=u.aliasPixel(K.lineWidth),M&&(K.moveTo(J,Q),K.lineTo(this.width,Q),K.stroke(),K.closePath()),K.lineWidth=this.lineWidth,K.strokeStyle=this.lineColor,K.beginPath(),K.moveTo(J-5,Q),K.lineTo(J,Q),K.stroke(),K.closePath()},this),v(this.xLabels,function(Q,R){var M=this.calculateX(R)+f(this.lineWidth),N=this.calculateX(R-(this.offsetGridLines?0.5:0))+f(this.lineWidth),O=this.xLabelRotation>0,P=this.showVerticalLines;0!==R||P||(P=!0),P&&K.beginPath(),R>0?(K.lineWidth=this.gridLineWidth,K.strokeStyle=this.gridLineColor):(K.lineWidth=this.lineWidth,K.strokeStyle=this.lineColor),P&&(K.moveTo(N,this.endPoint),K.lineTo(N,this.startPoint-3),K.stroke(),K.closePath()),K.lineWidth=this.lineWidth,K.strokeStyle=this.lineColor,K.beginPath(),K.moveTo(N,this.endPoint),K.lineTo(N,this.endPoint+5),K.stroke(),K.closePath(),K.save(),K.translate(M,O?this.endPoint+12:this.endPoint+8),K.rotate(-1*d(this.xLabelRotation)),K.font=this.font,K.textAlign=O?"right":"center",K.textBaseline=O?"middle":"top",K.fillText(Q,0,0),K.restore()},this))}}),t.RadialScale=t.Element.extend({initialize:function(){this.size=I([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(J){var K=this.drawingArea/(this.max-this.min);return(J-this.min)*K},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var J=b(this.stepValue),K=0;K<=this.steps;K++){this.yLabels.push(j(this.templateString,{value:(this.min+K*this.stepValue).toFixed(J)}))}},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var K,M,N,P,Q,R,S,T,U,V,W,X,J=I([this.height/2-this.pointLabelFontSize-5,this.width/2]),L=this.width,O=0;for(this.ctx.font=k(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),M=0;M<this.valuesCount;M++){K=this.getPointPosition(M,J),N=this.ctx.measureText(j(this.templateString,{value:this.labels[M]})).width+5,0===M||M===this.valuesCount/2?(P=N/2,K.x+P>L&&(L=K.x+P,Q=M),K.x-P<O&&(O=K.x-P,S=M)):M<this.valuesCount/2?K.x+N>L&&(L=K.x+N,Q=M):M>this.valuesCount/2&&K.x-N<O&&(O=K.x-N,S=M)}U=O,V=Math.ceil(L-this.width),R=this.getIndexAngle(Q),T=this.getIndexAngle(S),W=V/Math.sin(R+Math.PI/2),X=U/Math.sin(T+Math.PI/2),W=F(W)?W:0,X=F(X)?X:0,this.drawingArea=J-(X+W)/2,this.setCenterPoint(X,W)},setCenterPoint:function(L,M){var J=this.width-M-this.drawingArea,K=L+this.drawingArea;this.xCenter=(K+J)/2,this.yCenter=this.height/2},getIndexAngle:function(J){var K=2*Math.PI/this.valuesCount;return J*K-Math.PI/2},getPointPosition:function(K,L){var J=this.getIndexAngle(K);return{x:Math.cos(J)*L+this.xCenter,y:Math.sin(J)*L+this.yCenter}},draw:function(){if(this.display){var R=this.ctx;if(v(this.yLabels,function(W,Y){if(Y>0){var S,T=Y*(this.drawingArea/this.steps),U=this.yCenter-T;if(this.lineWidth>0){if(R.strokeStyle=this.lineColor,R.lineWidth=this.lineWidth,this.lineArc){R.beginPath(),R.arc(this.xCenter,this.yCenter,T,0,2*Math.PI),R.closePath(),R.stroke()}else{R.beginPath();for(var V=0;V<this.valuesCount;V++){S=this.getPointPosition(V,this.calculateCenterOffset(this.min+Y*this.stepValue)),0===V?R.moveTo(S.x,S.y):R.lineTo(S.x,S.y)}R.closePath(),R.stroke()}}if(this.showLabels){if(R.font=k(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var X=R.measureText(W).width;R.fillStyle=this.backdropColor,R.fillRect(this.xCenter-X/2-this.backdropPaddingX,U-this.fontSize/2-this.backdropPaddingY,X+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}R.textAlign="center",R.textBaseline="middle",R.fillStyle=this.fontColor,R.fillText(W,this.xCenter,U)}}},this),!this.lineArc){R.lineWidth=this.angleLineWidth,R.strokeStyle=this.angleLineColor;for(var J=this.valuesCount-1;J>=0;J--){if(this.angleLineWidth>0){var K=this.getPointPosition(J,this.calculateCenterOffset(this.max));R.beginPath(),R.moveTo(this.xCenter,this.yCenter),R.lineTo(K.x,K.y),R.stroke(),R.closePath()}var L=this.getPointPosition(J,this.calculateCenterOffset(this.max)+5);R.font=k(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),R.fillStyle=this.pointLabelFontColor;var M=this.labels.length,N=this.labels.length/2,O=N/2,P=O>J||J>M-O,Q=J===O||J===M-O;R.textAlign=0===J?"center":J===N?"center":N>J?"left":"right",R.textBaseline=Q?"middle":P?"bottom":"top",R.fillText(this.labels[J],L.x,L.y)}}}}}),u.addEvent(window,"resize",function(){var J;return function(){clearTimeout(J),J=setTimeout(function(){v(t.instances,function(K){K.options.responsive&&K.resize(K.render,!0)})},50)}}()),E?define(function(){return t}):"object"==typeof module&&module.exports&&(module.exports=t),s.Chart=t,r.fn.chart=function(){var J=[];return this.each(function(){J.push(new t(this.getContext("2d")))}),1===J.length?J[0]:J}}).call(this,jQuery),function(d){var e=d&&d.zui?d.zui:this,a=e.Chart,b=a.helpers,c={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:1,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};a.Type.extend({name:"Bar",defaults:c,initialize:function(g){var f=this.options;this.ScaleClass=a.Scale.extend({offsetGridLines:!0,calculateBarX:function(h,i,j){var k=this.calculateBaseWidth(),r=this.calculateX(j)-k/2,s=this.calculateBarWidth(h);return r+s*i+i*f.barDatasetSpacing+s/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*f.barValueSpacing},calculateBarWidth:function(h){var i=this.calculateBaseWidth()-(h-1)*f.barDatasetSpacing;return i/h}}),this.datasets=[],this.options.showTooltips&&b.bindEvents(this,this.options.tooltipEvents,function(h){var i="mouseout"!==h.type?this.getBarsAtEvent(h):[];this.eachBars(function(j){j.restore(["fillColor","strokeColor"])}),b.each(i,function(j){j.fillColor=j.highlightFill,j.strokeColor=j.highlightStroke}),this.showTooltip(i)}),this.BarClass=a.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),b.each(g.datasets,function(k,p){if(d.zui&&d.zui.Color&&d.zui.Color.get){var i=d.zui.Color.get(k.color),j=i.toCssStr();k.fillColor||(k.fillColor=i.clone().fade(50).toCssStr()),k.strokeColor||(k.strokeColor=j)}var h={label:k.label||null,fillColor:k.fillColor,strokeColor:k.strokeColor,bars:[]};this.datasets.push(h),b.each(k.data,function(m,l){h.bars.push(new this.BarClass({value:m,label:g.labels[l],datasetLabel:k.label,strokeColor:k.strokeColor,fillColor:k.fillColor,highlightFill:k.highlightFill||k.fillColor,highlightStroke:k.highlightStroke||k.strokeColor}))},this)},this),this.buildScale(g.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(h,i,j){b.extend(h,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,j,i),y:this.scale.endPoint}),h.save()},this),this.render()},update:function(){this.scale.update(),b.each(this.activeElements,function(f){f.restore(["fillColor","strokeColor"])}),this.eachBars(function(f){f.save()}),this.render()},eachBars:function(f){b.each(this.datasets,function(h,g){b.each(h.bars,f,this,g)},this)},getBarsAtEvent:function(g){for(var j,h=[],i=b.getRelativePosition(g),k=function(l){h.push(l.bars[j])},f=0;f<this.datasets.length;f++){for(j=0;j<this.datasets[f].bars.length;j++){if(this.datasets[f].bars[j].inRange(i.x,i.y)){return b.each(this.datasets,k),h}}}return h},buildScale:function(g){var h=this,i=function(){var j=[];return h.eachBars(function(k){j.push(k.value)}),j},f={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:g.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(j){var k=b.calculateScaleRange(i(),j,this.fontSize,this.beginAtZero,this.integersOnly);b.extend(this,k)},xLabels:g,font:b.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&b.extend(f,{calculateYRange:b.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(f)},addData:function(f,g){b.each(f,function(h,i){this.datasets[i].bars.push(new this.BarClass({value:h,label:g,x:this.scale.calculateBarX(this.datasets.length,i,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[i].strokeColor,fillColor:this.datasets[i].fillColor}))},this),this.scale.addXLabel(g),this.update()},removeData:function(){this.scale.removeXLabel(),b.each(this.datasets,function(f){f.bars.shift()},this),this.update()},reflow:function(){b.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var f=b.extend({height:this.chart.height,width:this.chart.width});this.scale.update(f)},draw:function(f){var g=f||1;this.clear();this.chart.ctx;this.scale.draw(g),b.each(this.datasets,function(h,i){b.each(h.bars,function(j,k){j.hasValue()&&(j.base=this.scale.endPoint,j.transition({x:this.scale.calculateBarX(this.datasets.length,i,k),y:this.scale.calculateY(j.value),width:this.scale.calculateBarWidth(this.datasets.length)},g).draw())},this)},this)}}),d.fn.barChart=function(h,f){var g=[];return this.each(function(){var i=d(this);g.push(new a(this.getContext("2d")).Bar(h,d.extend(i.data(),f)))}),1===g.length?g[0]:g}}.call(this,jQuery);