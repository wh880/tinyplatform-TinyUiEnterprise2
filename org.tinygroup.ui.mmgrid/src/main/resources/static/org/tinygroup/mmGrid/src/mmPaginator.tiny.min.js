!function(a){var b=function(d,c){this.$el=a(d);this.opts=c};b.prototype={_initLayout:function(){var e=this;var c=this.$el;var d=this.opts;c.addClass("mmPaginator");var g=['<div class="totalCountLabel"></div>','<ul class="pageList"></ul>','<div class="limit"><select></select></div>'];c.append(a(g.join("")));this.$totalCountLabel=c.find(".totalCountLabel");this.$pageList=c.find(".pageList");this.$limitList=c.find(".limit select");var f=this.$limitList;a.each(d.limitList,function(){var h=a("<option></option>").prop("value",this).text(e.formatString(d.limitLabel,[this]));f.append(h)});f.on("change",function(){c.data("page",1);e.$mmGrid.load()})},_plain:function(k,m,e){var h=this;var o=this.$el;var n=this.$pageList;var g=m%e===0?parseInt(m/e):parseInt(m/e)+1;g=g?g:0;if(g===0){k=1}else{if(k>g){k=g}else{if(k<1&&g!=0){k=1}}}var c=a('<li class="prev"><a>«</a></li>');if(k<=1){c.addClass("disable")}else{c.find("a").on("click",function(){o.data("page",k-1);h.$mmGrid.load()})}n.append(c);var j=[1];if(k>4){j.push("...")}for(var f=0;f<5;f++){var l=k-2+f;if(l>1&&l<=g-1){j.push(l)}}if(k+1<g-1){j.push("...")}if(g>1){j.push(g)}a.each(j,function(i,p){var q=a("<li><a></a></li>");if(p==="..."){q.addClass("").html("...")}else{if(p===k){q.addClass("active").find("a").text(p)}else{q.find("a").text(p).prop("title","第"+p+"页").on("click",function(r){o.data("page",p);h.$mmGrid.load()})}}n.append(q)});var d=a('<li class="next"><a title="下一页">»</a></li>');if(k>=g){d.addClass("disable")}else{d.find("a").on("click",function(){o.data("page",k+1);h.$mmGrid.load()})}n.append(d)},_search:function(e,d,c){},load:function(i){var e=this.$el;var h=this.$limitList;var f=this.opts;if(!i){i={}}var g=i[f.pageParamName];if(g===undefined||g===null){g=e.data("page")}e.data("page",g);var d=i[f.totalCountName];if(d===undefined){d=0}e.data("totalCount",d);var c=i[f.limitParamName];if(!c){c=h.val()}this.$limitList.val(c);this.$totalCountLabel.html(this.formatString(f.totalCountLabel,[d]));this.$pageList.empty();this._plain(g,d,this.$limitList.val())},formatString:function(d,c){return d.replace(/{(\d+)}/g,function(e,f){return typeof c[f]!="undefined"?c[f]:e})},params:function(){var d=this.opts;var c=this.$el;var e=this.$limitList;var f={};f[d.pageParamName]=c.data("page");f[d.limitParamName]=e.val();return f},init:function(c){var f=this;var e=f.opts;this.$mmGrid=c;this._initLayout();this.$mmGrid.on("loadSuccess",function(i,h){f.load(h)});var g={};g[e.totalCountName]=0;g[e.pageParamName]=e.page;g[e.limitParamName]=e.limit;this.load(g);if(c.opts.indexCol){var d=c.opts.cols[0];d.renderer=function(j,h,k){var i=f.params();return'<label class="mmg-index">'+(k+1+((i[e.pageParamName]-1)*i[e.limitParamName]))+"</label>"}}}};a.fn.mmPaginator=function(){if(arguments.length===0||typeof arguments[0]==="object"){var f=arguments[0],g=this.data("mmPaginator"),d=a.extend(true,{},a.fn.mmPaginator.defaults,f);if(!g){g=new b(this[0],d);this.data("mmPaginator",g)}return a.extend(true,this,g)}if(typeof arguments[0]==="string"){var g=this.data("mmPaginator");var e=g[arguments[0]];if(e){var c=Array.prototype.slice.call(arguments);return e.apply(g,c.slice(1))}}};a.fn.mmPaginator.defaults={style:"plain",totalCountName:"totalCount",page:1,pageParamName:"page",limitParamName:"limit",limitLabel:"每页{0}条",totalCountLabel:"共<span>{0}</span>条记录",limit:undefined,limitList:[20,30,40,50]};a.fn.mmPaginator.Constructor=b}(window.jQuery);