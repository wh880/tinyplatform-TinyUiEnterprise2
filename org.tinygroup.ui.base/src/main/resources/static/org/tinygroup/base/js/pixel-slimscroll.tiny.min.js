(function(a){jQuery.fn.extend({pixelSlimScroll:function(b){var c={width:"auto",size:"2px",color:"#000",distance:"1px",start:"top",opacity:0.4,railColor:"#333",railOpacity:0.2,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:false,wheelStep:20,touchScrollStep:200,borderRadius:"0px",railBorderRadius:"0px"};var d=a.extend(c,b);this.each(function(){var v,p,j,n,y,q,m,i,k="<div></div>",r=30,o=false;var z=a(this);if(z.parent().hasClass(d.wrapperClass)){var g=z.scrollTop();s=z.parent().find("."+d.barClass);e=z.parent().find("."+d.railClass);A();if(a.isPlainObject(b)){if("scrollTo" in b){g=parseInt(d.scrollTo)}else{if("scrollBy" in b){g+=parseInt(d.scrollBy)}else{if("destroy" in b){s.remove();e.remove();z.unwrap();return}}}u(g,false,true)}return}var h=a(k).addClass(d.wrapperClass).css({position:"relative",overflow:"hidden",width:d.width});z.css({overflow:"hidden",width:d.width});var e=a(k).addClass(d.railClass).css({width:d.size,height:"100%",position:"absolute",top:0,display:"none","border-radius":d.railBorderRadius,background:d.railColor,opacity:d.railOpacity,zIndex:90});var s=a(k).addClass(d.barClass).css({background:d.color,width:d.size,position:"absolute",top:0,opacity:d.opacity,display:"block","border-radius":d.borderRadius,BorderRadius:d.borderRadius,MozBorderRadius:d.borderRadius,WebkitBorderRadius:d.borderRadius,zIndex:99});e.css({right:d.distance});s.css({right:d.distance});z.wrap(h);z.parent().append(s);z.parent().append(e);s.bind("mousedown",function(B){var C=a(document);j=true;t=parseFloat(s.css("top"));pageY=B.pageY;C.bind("mousemove.slimscroll",function(D){currTop=t+D.pageY-pageY;s.css("top",currTop);u(0,s.position().top,false)});C.bind("mouseup.slimscroll",function(D){j=false;l();C.unbind(".slimscroll")});return false}).bind("selectstart.slimscroll",function(B){B.stopPropagation();B.preventDefault();return false});e.hover(function(){f()},function(){l()});s.hover(function(){p=true},function(){p=false});z.hover(function(){v=true;f();l()},function(){v=false;l()});z.bind("touchstart",function(C,B){if(C.originalEvent.touches.length){y=C.originalEvent.touches[0].pageY}});z.bind("touchmove",function(C){if(!o){C.originalEvent.preventDefault()}if(C.originalEvent.touches.length){var B=(y-C.originalEvent.touches[0].pageY)/d.touchScrollStep;u(B,true);y=C.originalEvent.touches[0].pageY}});A();w();function x(C){if(!v){return}var C=C||window.event;var D=0;if(C.wheelDelta){D=-C.wheelDelta/120}if(C.detail){D=C.detail/3}var B=C.target||C.srcTarget||C.srcElement;if(a(B).closest("."+d.wrapperClass).is(z.parent())){u(D,true)}if(C.preventDefault&&!o){C.preventDefault()}if(!o){C.returnValue=false}}function u(G,D,B){o=false;var F=G;var E=z.outerHeight()-s.outerHeight();if(D){F=parseInt(s.css("top"))+G*parseInt(d.wheelStep)/100*s.outerHeight();F=Math.min(Math.max(F,0),E);F=(G>0)?Math.ceil(F):Math.floor(F);s.css({top:F+"px"})}m=parseInt(s.css("top"))/(z.outerHeight()-s.outerHeight());F=m*(z[0].scrollHeight-z.outerHeight());if(B){F=G;var C=F/z[0].scrollHeight*z.outerHeight();C=Math.min(Math.max(C,0),E);s.css({top:C+"px"})}z.scrollTop(F);z.trigger("slimscrolling",~~F);f();l()}function w(){if(window.addEventListener){this.addEventListener("DOMMouseScroll",x,false);this.addEventListener("mousewheel",x,false)}else{document.attachEvent("onmousewheel",x)}}function A(){q=Math.max((z.outerHeight()/z[0].scrollHeight)*z.outerHeight(),r);s.css({height:q+"px"});var B=q==z.outerHeight()?"none":"block";s.css({display:B})}function f(){A();clearTimeout(n);if(m==~~m){o=d.allowPageScroll;if(i!=m){var B=(~~m==0)?"top":"bottom";z.trigger("slimscroll",B)}}else{o=false}i=m;if(q>=z.outerHeight()){o=true;return}s.stop(true,true).fadeIn("fast")}function l(){}});return this}});jQuery.fn.extend({pixelslimscroll:jQuery.fn.pixelSlimScroll})})(jQuery);