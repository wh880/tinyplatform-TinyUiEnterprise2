var idArray=[];(function(b){var a=function(c){c=c||{};var e=a.defaults;for(var d in e){if(c[d]===undefined){c[d]=e[d]}}return new a.fn._init(c)};a.fn=a.prototype={_init:function(c){var d=this;d.config=c;if(b("#mm",top.document).hasClass("m-menu")){var f=d.curId();if(c.addTab!==null){if(d.addIframe(c.addTab.items)){if(c.isRefresh){d.refreshIframe(c.addTab.items)}if(c.closeTab){d.closeIframe(f)}}}if(c.toTab!==null){if(d.toIframe(c.toTab.id)){if(c.isRefresh){d.refreshIframe(c.toTab.id)}if(c.closeTab){d.closeIframe(f)}}}if(c.toTab==null&&c.addTab==null&&c.closeTab){d.prevShow(f);d.closeIframe(f)}if(c.toTab==null&&c.addTab==null&&c.isRefresh){d.refreshIframe(f)}return}else{d._getMenu(c.menu);var e=b(".m-nav ul").find("li");b("#0Con").css({overflow:"auto"}).height(b(window).height()-76);d.menuHover(e);d.menuClick(e);d.closeTab_a();d.tabCut();d.resize();d.nextPrev();d._getRighthand();d.tabCloseEven()}return d},curId:function(){var f=top.document;var g=b("#tabList",f).find("li").filter(".on");var c=g.attr("id");var e=c.indexOf("list");var d=c.substring(0,e);return d},addIframe:function(c){var e=this,d=top.document;var c=c;c.height=b("#0Con",d).height();if(jQuery.inArray(c.id,top.idArray)==-1){e._getIframe(c);e._getTablist(c);top.idArray.push(c.id);e.addShow(c.id)}else{e.cutShow(c.id)}return e},toIframe:function(c){var d=this;if(jQuery.inArray(c,top.idArray)==-1){alert('指定ID= "'+c+'" 的页面不存在，请重新打开');return false}else{d.cutShow(c)}return d},closeIframe:function(d){var e=this;var d=d;var c=jQuery.inArray(d,top.idArray);top.idArray.splice(c,1);e.removeTab(d)},tabCut:function(){var c=this;b("#tabList").delegate("li","click",function(){var d=b(this).attr("id");var f=d.indexOf("list");var e=d.substring(0,f);c.cutShow(e)})},menuClick:function(d){var c=this;d.each(function(){b(this).find("dd").click(function(){var e={};e.url=b(this).find("a").attr("href");e.title=b(this).find("a").text();e.id=b(this).find("a").attr("id");e.height=b(window).height()-76;if(jQuery.inArray(e.id,idArray)==-1){c._getIframe(e);c._getTablist(e);idArray.push(e.id);c.addShow(e.id)}else{c.cutShow(e.id)}return false})});return c},addShow:function(c){var d=top.document;b("#"+c+"list",d).addClass("on").siblings().removeClass("on");b("#"+c+"Con",d).siblings("div").hide();return this},cutShow:function(c){var d=top.document;b("#"+c+"list",d).addClass("on").siblings().removeClass("on");b("#"+c+"Con",d).show().siblings("div").hide();return this},prevShow:function(c){var d=top.document;b("#"+c+"list",d).prev().addClass("on");b("#"+c+"Con",d).prev().show();return this},removeTab:function(c){var d=top.document;b("#"+c+"list",d).remove();b("#"+c+"Con",d).remove();return this},closeTab_a:function(){var c=this;b("#tabList").delegate("a.m-tab-close","click",function(){var d=b(this).parent().attr("id");var g=d.indexOf("list");var f=d.substring(0,g);var e=jQuery.inArray(f,idArray);idArray.splice(e,1);if(b(this).parent().hasClass("on")){c.prevShow(f);c.removeTab(f)}else{c.removeTab(f)}});return c},nextPrev:function(){var d=0;var c=120;b("#tabLeft").on("click",function(){var h=b("#tabList").parent().innerWidth();var g=0;var f=b("#tabList").find("li");for(var e=0;e<f.length;e++){g=g+f.eq(e).outerWidth(true)}if(d>=0){return false}else{b("#tabList").animate({left:d+c});d=d+c}});b("#tabRight").on("click",function(){var h=b("#tabList").parent().innerWidth();var g=0;var f=b("#tabList").find("li");for(var e=0;e<f.length;e++){g=g+f.eq(e).outerWidth(true)}if(g<=h){return false}else{if((g-Math.abs(d))<=h){return false}else{b("#tabList").animate({left:d-c});d=d-c}}})},menuHover:function(c){c.hover(function(){b(this).children("dl").fadeIn(300)},function(){b(this).children("dl").fadeOut(0)});return this},resize:function(){b(window).resize(function(){var c=b(window).height()-76;b("#tabCon").children("div").height(c)});return this},refreshIframe:function(c){var d=top.document;if(c.id){b("#"+c.id+"Con",d).find(".m-frameCon")[0].contentWindow.location.href=c.url}else{b("#"+c+"Con",d).find(".m-frameCon")[0].contentWindow.location.reload()}return this},_getMenu:function(e){var d=b('<div class="m-nav"></div>');var c=b("<ul></ul>");b(e).each(function(g){var h=b("<li><span>"+e[g].text+"</span></li>");var f=b("<dl></dl>");b(e[g].items).each(function(i){var k='<dd><a id="'+e[g].items[i].id+'" href="'+e[g].items[i].href+'">'+e[g].items[i].text+"</a>";f.append(k)});h.append(f);c.append(h)});d.append(c);b(".m-container").prepend(d);return this},_getIframe:function(c){var d=top.document;var e="";e+='<div id="'+c.id+'Con" style="height:'+c.height+'px;" class="m-tab-content"><iframe scrolling="auto" src="'+c.url+'" frameborder="0" class="m-frameCon"></iframe></div>';b("#tabCon",d).append(e);return this},_getTablist:function(c){var d=top.document;var e="";e+='<li id="'+c.id+'list"><span>'+c.title+'</span><a href="javascript:" class="m-tab-close"></a></li>';b("#tabList",d).append(e);return this},_getRighthand:function(){var c=this;if(b("#mm",top.document).hasClass("m-menu")){return}else{b("body").append(a.rightHand);b("#tabList").delegate("li","contextmenu",function(j){var f=b(this).attr("id");var h=f.indexOf("list");var g=f.substring(0,h);c.cutShow(g);var d=b("#tabList").find("li").eq(0).attr("id");if(d==f){return false}else{b("#mm").show().css({top:j.pageY-2,left:j.pageX-4});return false}});b("#mm").find(".menu-item").hover(function(){b(this).addClass("menu-active")},function(){b(this).removeClass("menu-active")});b("#mm").bind("mouseleave",function(){b(this).hide()})}return c},tabCloseEven:function(){var c=this;b("#mm-tabupdate").click(function(){var d=b("#tabList").find("li").filter(".on").attr("id");var f=d.indexOf("list");var e=d.substring(0,f);c.refreshIframe(e);b("#mm").hide()});b("#mm-tabclose").click(function(){var d=b("#tabList").find("li").filter(".on").attr("id");var g=d.indexOf("list");var f=d.substring(0,g);var e=jQuery.inArray(f,idArray);idArray.splice(e,1);c.prevShow(f);c.removeTab(f);b("#mm").hide()});b("#mm-tabcloseall").click(function(){b("#tabList").children("li").each(function(d){if(d==0){}else{b(this).remove()}});b("#tabCon").children("div").each(function(d){if(d==0){}else{b(this).remove()}});b("#tabList").find("li").eq(0).addClass("on");b("#tabCon").find("div").eq(0).show();idArray=[];b("#mm").hide()});b("#mm-tabcloseother").click(function(){var d=b("#tabList").find("li").filter(".on").attr("id");var g=d.indexOf("list");var f=d.substring(0,g);var e=b("#tabList").find("li").filter(".on").index();b("#tabList").children("li").each(function(h){if(h==0||h==e){}else{b(this).remove()}});b("#tabCon").children("div").each(function(h){if(h==0||h==e){}else{b(this).remove()}});idArray=[];idArray.push(f);b("#mm").hide()});return this}};a.fn._init.prototype=a.fn;b.fn.tabs=b.fn.artTabs=function(){var c=arguments;this[this.live?"live":"bind"]("click",function(){a.apply(this,c);return false});return this};a.rightHand='<div id="mm" class="m-menu"><div class="menu-line"></div><div class="menu-item" id="mm-tabupdate"><div class="menu-text">刷新</div></div><div class="menu-sep"></div><div class="menu-item" id="mm-tabclose"><div class="menu-text">关闭</div></div><div class="menu-item" id="mm-tabcloseother"><div class="menu-text">关闭其他</div></div><div class="menu-item" id="mm-tabcloseall"><div class="menu-text">关闭全部</div></div></div>';a.defaults={menu:null,addTab:null,toTab:null,closeTab:false,isRefresh:false};window.artTabs=b.tabs=b.artTabs=a})(jQuery);function setCursorPosition(c,b){var d=c.value;var a=d.length;var b=b||a;if(a<b){return}setTimeout(function(){c.focus();if(c.setSelectionRange){c.setSelectionRange(b,b)}else{var e=c.createTextRange();e.moveStart("character",-a);e.moveEnd("character",-a);e.moveStart("character",b);e.moveEnd("character",0);e.select()}},10)};