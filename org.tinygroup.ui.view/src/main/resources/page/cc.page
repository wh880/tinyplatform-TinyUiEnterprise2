#*
#macro tUploadInput(name value mapInfo)#set(uploadid=fmt("upload%d",rand()),fixData=mapInfo?.fixData)
    ##if(fixData)
        #set(ss=mapInfo.remove("fixData"))
    ##end
<div class="input-group">
    <input type="text" id="${uploadid}" name="${name}" class="form-control ${mapInfo?.get("class")}" #mapToHtml(mapInfo)>
    <span id="${uploadid}-wrap"><input type="file" class="input-file" name="upfile" id="${uploadid}-file"></span>
    <span class="input-group-addon">#faIcon("cloud-upload") 浏览</span>
</div>
<script type="text/javascript">
    $(function(){
        $("#${uploadid}-wrap").on("change","#${uploadid}-file",function(){
            $.ajaxFileUpload({
                url: '#link(UPLOAD_ACTION_URL)',
                secureuri: false,
                fileElementId: "${uploadid}-file",
                dataType: 'json',
                data:{tinyFrame:1#mapToJson(fixData)},
                success: function (data, status) {
                    if(data.state=="SUCCESS"){
                        $("#${uploadid}").val(data.url);
                    }
                }
            });
        });
    });
</script>
#end

<form action="sss" action="http://127.0.0.1:8001/tt.php" method="post">



    #tUploadInput("sss1" "" {"fixData":{"data2":"sss2"}})
<input type="submit" value="save" />
  </form>



*#

#macro outMacroCode(codeStr)#return(!instance(codeStr,"java.lang.String"))${eval(codeStr.replaceAll('(?is)<div[^<>]+tinyplugins="macros".*?(#@.*?#end).*?<hr/>\s*</div>','$1').replace('&quot;','"'))}#end
#outMacroCode("test")