(function(d){var e={sortOrder:"bs.table.sortOrder",sortName:"bs.table.sortName",pageNumber:"bs.table.pageNumber",pageList:"bs.table.pageList",columns:"bs.table.columns",searchText:"bs.table.searchText",filterControl:"bs.table.filterControl"};var c=function(y){var z=y.$header;if(y.options.height){z=y.$tableHeader}return z};var f=function(y){var z="select, input";if(y.options.height){z="table select, table input"}return z};var m=function(){return !!(navigator.cookieEnabled)};var u=function(B,y){var z=-1;for(var A=0;A<y.length;A++){if(B.toLowerCase()===y[A].toLowerCase()){z=A;break}}return z};var l=function(y,A,z){if((!y.options.cookie)||(!m())||(y.options.cookieIdTable==="")){return}if(u(A,y.options.cookiesEnabled)===-1){return}A=y.options.cookieIdTable+"."+A;if(!A||/^(?:expires|max\-age|path|domain|secure)$/i.test(A)){return false}document.cookie=encodeURIComponent(A)+"="+encodeURIComponent(z)+t(y.options.cookieExpire)+(y.options.cookieDomain?"; domain="+y.options.cookieDomain:"")+(y.options.cookiePath?"; path="+y.options.cookiePath:"")+(y.cookieSecure?"; secure":"");return true};var o=function(z,y,A){if(!A){return null}if(u(A,z.options.cookiesEnabled)===-1){return null}A=y+"."+A;return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(A).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null};var i=function(y){if(!y){return false}return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(y).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)};var b=function(A,B,z,y){B=A+"."+B;if(!i(B)){return false}document.cookie=encodeURIComponent(B)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(y?"; domain="+y:"")+(z?"; path="+z:"");return true};var t=function(y){var z=y.replace(/[0-9]*/,"");y=y.replace(/[A-Za-z]/,"");switch(z.toLowerCase()){case"s":y=+y;break;case"mi":y=y*60;break;case"h":y=y*60*60;break;case"d":y=y*24*60*60;break;case"m":y=y*30*24*60*60;break;case"y":y=y*365*24*60*60;break;default:y=undefined;break}return y===undefined?"":"; max-age="+y};d.extend(d.fn.bootstrapTable.defaults,{cookie:false,cookieExpire:"2h",cookiePath:null,cookieDomain:null,cookieSecure:null,cookieIdTable:"",cookiesEnabled:["bs.table.sortOrder","bs.table.sortName","bs.table.pageNumber","bs.table.pageList","bs.table.columns","bs.table.searchText","bs.table.filterControl"],filterControls:[],filterControlValuesLoaded:false});d.fn.bootstrapTable.methods.push("deleteCookie");var j=d.fn.bootstrapTable.Constructor,h=j.prototype.init,g=j.prototype.initTable,x=j.prototype.onSort,p=j.prototype.onPageNumber,r=j.prototype.onPageListChange,q=j.prototype.onPageFirst,s=j.prototype.onPagePre,a=j.prototype.onPageNext,w=j.prototype.onPageLast,n=j.prototype.toggleColumn,k=j.prototype.selectPage,v=j.prototype.onSearch;j.prototype.init=function(){var z=0;this.options.filterControls=[];this.options.filterControlValuesLoaded=false;this.options.cookiesEnabled=typeof this.options.cookiesEnabled==="string"?this.options.cookiesEnabled.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.cookiesEnabled;if(this.options.filterControl){var y=this;this.$el.on("column-search.bs.table",function(D,C,E){var B=true;for(var A=0;A<y.options.filterControls.length;A++){if(y.options.filterControls[A].field===C){y.options.filterControls[A].text=E;B=false;break}}if(B){y.options.filterControls.push({field:C,text:E})}l(y,e.filterControl,JSON.stringify(y.options.filterControls))}).on("post-body.bs.table",function(){setTimeout(function(){if(!y.options.filterControlValuesLoaded){y.options.filterControlValuesLoaded=true;var B=JSON.parse(o(y,y.options.cookieIdTable,e.filterControl));if(B){var C=null,A=[],E=c(y),D=f(y);E.find(D).each(function(F,G){C=d(this).closest("[data-field]").data("field");A=d.grep(B,function(H){return H.field===C});if(A.length>0){d(this).val(A[0].text);y.onColumnSearch({currentTarget:d(this)})}})}}},250)})}h.apply(this,Array.prototype.slice.apply(arguments))};j.prototype.initTable=function(){g.apply(this,Array.prototype.slice.apply(arguments));this.initCookie()};j.prototype.initCookie=function(){if(!this.options.cookie){return}if((this.options.cookieIdTable==="")||(this.options.cookieExpire==="")||(!m())){throw new Error("Configuration error. Please review the cookieIdTable, cookieExpire properties, if those properties are ok, then this browser does not support the cookies");return}var y=o(this,this.options.cookieIdTable,e.sortOrder),A=o(this,this.options.cookieIdTable,e.sortName),z=o(this,this.options.cookieIdTable,e.pageNumber),D=o(this,this.options.cookieIdTable,e.pageList),C=JSON.parse(o(this,this.options.cookieIdTable,e.columns)),B=o(this,this.options.cookieIdTable,e.searchText);this.options.sortOrder=y?y:this.options.sortOrder;this.options.sortName=A?A:this.options.sortName;this.options.pageNumber=z?+z:this.options.pageNumber;this.options.pageSize=D?D===this.options.formatAllRows()?D:+D:this.options.pageSize;this.options.searchText=B?B:"";if(C){d.each(this.columns,function(E,F){F.visible=d.inArray(F.field,C)!==-1})}};j.prototype.onSort=function(){x.apply(this,Array.prototype.slice.apply(arguments));l(this,e.sortOrder,this.options.sortOrder);l(this,e.sortName,this.options.sortName)};j.prototype.onPageNumber=function(){p.apply(this,Array.prototype.slice.apply(arguments));l(this,e.pageNumber,this.options.pageNumber)};j.prototype.onPageListChange=function(){r.apply(this,Array.prototype.slice.apply(arguments));l(this,e.pageList,this.options.pageSize)};j.prototype.onPageFirst=function(){q.apply(this,Array.prototype.slice.apply(arguments));l(this,e.pageNumber,this.options.pageNumber)};j.prototype.onPagePre=function(){s.apply(this,Array.prototype.slice.apply(arguments));l(this,e.pageNumber,this.options.pageNumber)};j.prototype.onPageNext=function(){a.apply(this,Array.prototype.slice.apply(arguments));l(this,e.pageNumber,this.options.pageNumber)};j.prototype.onPageLast=function(){w.apply(this,Array.prototype.slice.apply(arguments));l(this,e.pageNumber,this.options.pageNumber)};j.prototype.toggleColumn=function(){n.apply(this,Array.prototype.slice.apply(arguments));var y=[];d.each(this.columns,function(z,A){if(A.visible){y.push(A.field)}});l(this,e.columns,JSON.stringify(y))};j.prototype.selectPage=function(y){k.apply(this,Array.prototype.slice.apply(arguments));l(this,e.pageNumber,y)};j.prototype.onSearch=function(){var y=Array.prototype.slice.apply(arguments);v.apply(this,y);if(d(y[0].currentTarget).parent().hasClass("search")){l(this,e.searchText,this.searchText)}};j.prototype.deleteCookie=function(y){if((y==="")||(!m())){return}b(this.options.cookieIdTable,e[y],this.options.cookiePath,this.options.cookieDomain)}})(jQuery);