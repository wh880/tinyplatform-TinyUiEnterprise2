(function(b,a,c){(function(d){if(typeof define==="function"&&define.amd){define(["jquery"],d)}else{if(typeof exports==="object"){module.exports=d(require("jquery"))}else{d(b.jQuery)}}}(function(k){var n="webuiPopover";var t="webui-popover";var h="webui.popover";var j={placement:"auto",container:null,width:"auto",height:"auto",trigger:"click",style:"",delay:{show:null,hide:null},async:{type:"GET",before:null,success:null,error:null},cache:true,multi:false,arrow:true,title:"",content:"",closeable:false,padding:true,url:"",type:"html",animation:null,template:'<div class="webui-popover"><div class="webui-arrow"></div><div class="webui-popover-inner"><a href="#" class="close"></a><h3 class="webui-popover-title"></h3><div class="webui-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',backdrop:false,dismissible:true,onShow:null,onHide:null,abortXHR:true,autoHide:false,offsetTop:0,offsetLeft:0,iframeOptions:{frameborder:"0",allowtransparency:"true",id:"",name:"",scrolling:"",onload:"",height:"",width:""}};var l=[];var g=k('<div class="webui-popover-backdrop"></div>');var m=0;var f=false;var q=-2000;var i=k(a);var s=function(u,v){return isNaN(u)?(v||0):Number(u)};var r=function(u){return u.data("plugin_"+n)};var e=function(){var u=null;for(var v=0;v<l.length;v++){u=r(l[v]);if(u){u.hide(true)}}i.trigger("hiddenAll."+h)};var p=("ontouchstart" in a.documentElement)&&(/Mobi/.test(navigator.userAgent));var o=function(v){var u={x:0,y:0};if(v.type==="touchstart"||v.type==="touchmove"||v.type==="touchend"||v.type==="touchcancel"){var w=v.originalEvent.touches[0]||v.originalEvent.changedTouches[0];u.x=w.pageX;u.y=w.pageY}else{if(v.type==="mousedown"||v.type==="mouseup"||v.type==="click"){u.x=v.pageX;u.y=v.pageY}}return u};function d(v,u){this.$element=k(v);if(u){if(k.type(u.delay)==="string"||k.type(u.delay)==="number"){u.delay={show:u.delay,hide:u.delay}}}this.options=k.extend({},j,u);this._defaults=j;this._name=n;this._targetclick=false;this.init();l.push(this.$element)}d.prototype={init:function(){if(this.getTrigger()==="click"||p){this.$element.off("click touchend").on("click touchend",k.proxy(this.toggle,this))}else{if(this.getTrigger()==="hover"){this.$element.off("mouseenter mouseleave click").on("mouseenter",k.proxy(this.mouseenterHandler,this)).on("mouseleave",k.proxy(this.mouseleaveHandler,this))}}this._poped=false;this._inited=true;this._opened=false;this._idSeed=m;this.options.container=k(this.options.container||a.body).first();if(this.options.backdrop){g.appendTo(this.options.container).hide()}m++;if(this.getTrigger()==="sticky"){this.show()}},destroy:function(){var u=-1;for(var v=0;v<l.length;v++){if(l[v]===this.$element){u=v;break}}l.splice(u,1);this.hide();this.$element.data("plugin_"+n,null);if(this.getTrigger()==="click"){this.$element.off("click")}else{if(this.getTrigger()==="hover"){this.$element.off("mouseenter mouseleave")}}if(this.$target){this.$target.remove()}},hide:function(w,v){if(!w&&this.getTrigger()==="sticky"){return}if(!this._opened){return}if(v){v.preventDefault();v.stopPropagation()}if(this.xhr&&this.options.abortXHR===true){this.xhr.abort();this.xhr=null}var x=k.Event("hide."+h);this.$element.trigger(x,[this.$target]);if(this.$target){this.$target.removeClass("in").addClass(this.getHideAnimation());var u=this;setTimeout(function(){u.$target.hide()},300)}if(this.options.backdrop){g.hide()}this._opened=false;this.$element.trigger("hidden."+h,[this.$target]);if(this.options.onHide){this.options.onHide(this.$target)}},resetAutoHide:function(){var v=this;var u=v.getAutoHide();if(u){if(v.autoHideHandler){clearTimeout(v.autoHideHandler)}v.autoHideHandler=setTimeout(function(){v.hide()},u)}},toggle:function(u){if(u){u.preventDefault();u.stopPropagation()}this[this.getTarget().hasClass("in")?"hide":"show"]()},hideAll:function(){e()},show:function(){var u=this.getTarget().removeClass().addClass(t).addClass(this._customTargetClass);if(!this.options.multi){this.hideAll()}if(this._opened){return}if(!this.getCache()||!this._poped||this.content===""){this.content="";this.setTitle(this.getTitle());if(!this.options.closeable){u.find(".close").off("click").remove()}if(!this.isAsync()){this.setContent(this.getContent())}else{this.setContentASync(this.options.content)}u.show()}this.displayContent();if(this.options.onShow){this.options.onShow(u)}this.bindBodyEvents();if(this.options.backdrop){g.show()}this._opened=true;this.resetAutoHide()},displayContent:function(){var w=this.getElementPosition(),u=this.getTarget().removeClass().addClass(t).addClass(this._customTargetClass),F=this.getContentElement(),D=u[0].offsetWidth,B=u[0].offsetHeight,y="bottom",C=k.Event("show."+h);this.$element.trigger(C,[u]);var v=this.$element.data("width")||this.options.width;if(v===""){v=this._defaults.width}if(v!=="auto"){u.width(v)}var G=this.$element.data("height")||this.options.height;if(G===""){G=this._defaults.height}if(G!=="auto"){F.height(G)}if(this.options.style){this.$target.addClass(t+"-"+this.options.style)}if(!this.options.arrow){u.find(".webui-arrow").remove()}u.detach().css({top:q,left:q,display:"block"});if(this.getAnimation()){u.addClass(this.getAnimation())}u.appendTo(this.options.container);y=this.getPlacement(w);this.$element.trigger("added."+h);this.initTargetEvents();if(!this.options.padding){if(this.options.height!=="auto"){F.css("height",F.outerHeight())}this.$target.addClass("webui-no-padding")}D=u[0].offsetWidth;B=u[0].offsetHeight;var x=this.getTargetPositin(w,y,D,B);this.$target.css(x.position).addClass(y).addClass("in");if(this.options.type==="iframe"){var H=u.find("iframe");var A=u.width();var z=H.parent().height();if(this.options.iframeOptions.width!==""&&this.options.iframeOptions.width!=="auto"){A=this.options.iframeOptions.width}if(this.options.iframeOptions.height!==""&&this.options.iframeOptions.height!=="auto"){z=this.options.iframeOptions.height}H.width(A).height(z)}if(!this.options.arrow){this.$target.css({margin:0})}if(this.options.arrow){var E=this.$target.find(".webui-arrow");E.removeAttr("style");if(y==="left"||y==="right"){E.css({top:this.$target.height()/2})}else{if(y==="top"||y==="bottom"){E.css({left:this.$target.width()/2})}}if(x.arrowOffset){if(x.arrowOffset.left===-1||x.arrowOffset.top===-1){E.hide()}else{E.css(x.arrowOffset)}}}this._poped=true;this.$element.trigger("shown."+h,[this.$target])},isTargetLoaded:function(){return this.getTarget().find("i.glyphicon-refresh").length===0},getTriggerElement:function(){return this.$element},getTarget:function(){if(!this.$target){var u=n+this._idSeed;this.$target=k(this.options.template).attr("id",u).data("trigger-element",this.getTriggerElement());this._customTargetClass=this.$target.attr("class")!==t?this.$target.attr("class"):null;this.getTriggerElement().attr("data-target",u)}return this.$target},getTitleElement:function(){return this.getTarget().find("."+t+"-title")},getContentElement:function(){if(!this.$contentElement){this.$contentElement=this.getTarget().find("."+t+"-content")}return this.$contentElement},getTitle:function(){return this.$element.attr("data-title")||this.options.title||this.$element.attr("title")},getUrl:function(){return this.$element.attr("data-url")||this.options.url},getAutoHide:function(){return this.$element.attr("data-auto-hide")||this.options.autoHide},getOffsetTop:function(){return s(this.$element.attr("data-offset-top"))||this.options.offsetTop},getOffsetLeft:function(){return s(this.$element.attr("data-offset-left"))||this.options.offsetLeft},getCache:function(){var u=this.$element.attr("data-cache");if(typeof(u)!=="undefined"){switch(u.toLowerCase()){case"true":case"yes":case"1":return true;case"false":case"no":case"0":return false}}return this.options.cache},getTrigger:function(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow:function(){var u=this.$element.attr("data-delay-show");if(typeof(u)!=="undefined"){return u}return this.options.delay.show===0?0:this.options.delay.show||100},getHideDelay:function(){var u=this.$element.attr("data-delay-hide");if(typeof(u)!=="undefined"){return u}return this.options.delay.hide===0?0:this.options.delay.hide||100},getAnimation:function(){var u=this.$element.attr("data-animation");return u||this.options.animation},getHideAnimation:function(){var u=this.getAnimation();return u?u+"-out":"out"},setTitle:function(u){var v=this.getTitleElement();if(u){v.html(u)}else{v.remove()}},hasContent:function(){return this.getContent()},getIframe:function(){var v=k("<iframe></iframe>").attr("src",this.getUrl());var u=this;k.each(this._defaults.iframeOptions,function(w){if(typeof u.options.iframeOptions[w]!=="undefined"){v.attr(w,u.options.iframeOptions[w])}});return v},getContent:function(){if(this.getUrl()){switch(this.options.type){case"iframe":this.content=this.getIframe();break;case"html":try{this.content=k(this.getUrl());if(!this.content.is(":visible")){this.content.show()}}catch(v){throw new Error("Unable to get popover content. Invalid selector specified.")}break}}else{if(!this.content){var w="";if(k.isFunction(this.options.content)){w=this.options.content.apply(this.$element[0],[this])}else{w=this.options.content}this.content=this.$element.attr("data-content")||w;if(!this.content){var u=this.$element.next();if(u&&u.hasClass(t+"-content")){this.content=u}}}}return this.content},setContent:function(w){var u=this.getTarget();var v=this.getContentElement();if(typeof w==="string"){v.html(w)}else{if(w instanceof jQuery){v.html("");if(!this.options.cache){w.clone(true,true).removeClass(t+"-content").appendTo(v)}else{w.removeClass(t+"-content").appendTo(v)}}}this.$target=u},isAsync:function(){return this.options.type==="async"},setContentASync:function(v){var u=this;if(this.xhr){return}this.xhr=k.ajax({url:this.getUrl(),type:this.options.async.type,cache:this.getCache(),beforeSend:function(w){if(u.options.async.before){u.options.async.before(u,w)}},success:function(x){u.bindBodyEvents();if(v&&k.isFunction(v)){u.content=v.apply(u.$element[0],[x])}else{u.content=x}u.setContent(u.content);var w=u.getContentElement();w.removeAttr("style");u.displayContent();if(u.options.async.success){u.options.async.success(u,x)}},complete:function(){u.xhr=null},error:function(x,w){if(u.options.async.error){u.options.async.error(u,x,w)}}})},bindBodyEvents:function(){if(f){return}if(this.options.dismissible&&this.getTrigger()==="click"){i.off("keyup.webui-popover").on("keyup.webui-popover",k.proxy(this.escapeHandler,this));i.off("click.webui-popover touchend.webui-popover").on("click.webui-popover touchend.webui-popover",k.proxy(this.bodyClickHandler,this))}else{if(this.getTrigger()==="hover"){i.off("touchend.webui-popover").on("touchend.webui-popover",k.proxy(this.bodyClickHandler,this))}}},mouseenterHandler:function(){var u=this;if(u._timeout){clearTimeout(u._timeout)}u._enterTimeout=setTimeout(function(){if(!u.getTarget().is(":visible")){u.show()}},this.getDelayShow())},mouseleaveHandler:function(){var u=this;clearTimeout(u._enterTimeout);u._timeout=setTimeout(function(){u.hide()},this.getHideDelay())},escapeHandler:function(u){if(u.keyCode===27){this.hideAll()}},bodyClickHandler:function(y){f=true;var z=true;for(var v=0;v<l.length;v++){var B=r(l[v]);if(B&&B._opened){var C=B.getTarget().offset().left;var x=B.getTarget().offset().top;var A=B.getTarget().offset().left+B.getTarget().width();var w=B.getTarget().offset().top+B.getTarget().height();var D=o(y);var u=D.x>=C&&D.x<=A&&D.y>=x&&D.y<=w;if(u){z=false;break}}}if(z){e()}},initTargetEvents:function(){if(this.getTrigger()==="hover"){this.$target.off("mouseenter mouseleave").on("mouseenter",k.proxy(this.mouseenterHandler,this)).on("mouseleave",k.proxy(this.mouseleaveHandler,this))}this.$target.find(".close").off("click").on("click",k.proxy(this.hide,this,true))},getPlacement:function(E){var B,v=this.options.container,F=v.innerWidth(),C=v.innerHeight(),x=v.scrollTop(),y=v.scrollLeft(),A=Math.max(0,E.left-y),z=Math.max(0,E.top-x);if(typeof(this.options.placement)==="function"){B=this.options.placement.call(this,this.getTarget()[0],this.$element[0])}else{B=this.$element.data("placement")||this.options.placement}var D=B==="horizontal";var u=B==="vertical";var w=B==="auto"||D||u;if(w){if(A<F/3){if(z<C/3){B=D?"right-bottom":"bottom-right"}else{if(z<C*2/3){if(u){B=z<=C/2?"bottom-right":"top-right"}else{B="right"}}else{B=D?"right-top":"top-right"}}}else{if(A<F*2/3){if(z<C/3){if(D){B=A<=F/2?"right-bottom":"left-bottom"}else{B="bottom"}}else{if(z<C*2/3){if(D){B=A<=F/2?"right":"left"}else{B=z<=C/2?"bottom":"top"}}else{if(D){B=A<=F/2?"right-top":"left-top"}else{B="top"}}}}else{if(z<C/3){B=D?"left-bottom":"bottom-left"}else{if(z<C*2/3){if(u){B=z<=C/2?"bottom-left":"top-left"}else{B="left"}}else{B=D?"left-top":"top-left"}}}}}else{if(B==="auto-top"){if(A<F/3){B="top-right"}else{if(A<F*2/3){B="top"}else{B="top-left"}}}else{if(B==="auto-bottom"){if(A<F/3){B="bottom-right"}else{if(A<F*2/3){B="bottom"}else{B="bottom-left"}}}else{if(B==="auto-left"){if(z<C/3){B="left-top"}else{if(z<C*2/3){B="left"}else{B="left-bottom"}}}else{if(B==="auto-right"){if(z<C/3){B="right-top"}else{if(z<C*2/3){B="right"}else{B="right-bottom"}}}}}}}return B},getElementPosition:function(){return k.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTargetPositin:function(O,J,y,z){var B=O,H=this.options.container,P=H.innerWidth(),A=H.innerHeight(),w=this.$element.outerWidth(),E=this.$element.outerHeight(),v=H.scrollTop(),N=H.scrollLeft(),R={},L=null,K=this.options.arrow?20:0,I=10,x=w<K+I?K:0,G=E<K+I?K:0,S=0,C=A+v,u=P+N;var M=B.left+B.width/2-x>0;var Q=B.left+B.width/2+x<u;var D=B.top+B.height/2-G>0;var F=B.top+B.height/2+G<C;switch(J){case"bottom":R={top:B.top+B.height,left:B.left+B.width/2-y/2};break;case"top":R={top:B.top-z,left:B.left+B.width/2-y/2};break;case"left":R={top:B.top+B.height/2-z/2,left:B.left-y};break;case"right":R={top:B.top+B.height/2-z/2,left:B.left+B.width};break;case"top-right":R={top:B.top-z,left:M?B.left-x:I};L={left:M?Math.min(w,y)/2+x:q};break;case"top-left":S=Q?x:-I;R={top:B.top-z,left:B.left-y+B.width+S};L={left:Q?y-Math.min(w,y)/2-x:q};break;case"bottom-right":R={top:B.top+B.height,left:M?B.left-x:I};L={left:M?Math.min(w,y)/2+x:q};break;case"bottom-left":S=Q?x:-I;R={top:B.top+B.height,left:B.left-y+B.width+S};L={left:Q?y-Math.min(w,y)/2-x:q};break;case"right-top":S=F?G:-I;R={top:B.top-z+B.height+S,left:B.left+B.width};L={top:F?z-Math.min(E,z)/2-G:q};break;case"right-bottom":R={top:D?B.top-G:I,left:B.left+B.width};L={top:D?Math.min(E,z)/2+G:q};break;case"left-top":S=F?G:-I;R={top:B.top-z+B.height+S,left:B.left-y};L={top:F?z-Math.min(E,z)/2-G:q};break;case"left-bottom":R={top:D?B.top-G:I,left:B.left-y};L={top:D?Math.min(E,z)/2+G:q};break}R.top+=this.getOffsetTop();R.left+=this.getOffsetLeft();return{position:R,arrowOffset:L}}};k.fn[n]=function(w,v){var x=[];var u=this.each(function(){var y=k.data(this,"plugin_"+n);if(!y){if(!w){y=new d(this,null)}else{if(typeof w==="string"){if(w!=="destroy"){if(!v){y=new d(this,null);x.push(y[w]())}}}else{if(typeof w==="object"){y=new d(this,w)}}}k.data(this,"plugin_"+n,y)}else{if(w==="destroy"){y.destroy()}else{if(typeof w==="string"){x.push(y[w]())}}}});return(x.length)?x:u}}))})(window,document);$(document).off("click.popover.data-api").on("click.popover.data-api",'[data-toggle="popover"]',function(){var c=$(this);var a={trigger:"click",title:"信息",content:"<p>信息.</p>",width:300,multi:true,closeable:false,style:"",padding:true};var b={};if(typeof(c.attr("href"))!="undefined"&&c.attr("href")){b={width:260,height:350,closeable:true,padding:false,cache:false,multi:false,url:c.attr("href"),type:"async",content:function(d){return d}}}c.off("click.popover.data-api").webuiPopover("destroy").webuiPopover($.extend({},a,b,c.data()));c.on("hidden.webui.popover",function(){c.webuiPopover("destroy")}).trigger("click");return false});