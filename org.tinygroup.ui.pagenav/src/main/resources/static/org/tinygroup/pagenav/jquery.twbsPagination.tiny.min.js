(function(e,d,a,f){var b=e.fn.twbsPagination;var c=function(h,g){this.$element=e(h);this.options=e.extend({},e.fn.twbsPagination.defaults,g);this.init(this.options)};c.prototype={constructor:c,init:function(g){this.options=e.extend({},this.options,g);switch(this.options.version){case"1.0":this.currentPages=this.getPages_v_1_0(this.options.startPage);break;case"1.1":this.currentPages=this.getPages_v_1_1(this.options.startPage);break;default:this.currentPages=this.getPages_v_1_1(this.options.startPage);break}if(this.options.startPage<1||this.options.startPage>this.options.totalPages){throw new Error("Start page option is incorrect")}if(this.options.totalPages<=0){throw new Error("Total pages option cannot be less 1 (one)!")}if(!e.isNumeric(this.options.visiblePages)&&!this.options.visiblePages){this.options.visiblePages=this.options.totalPages}if(this.options.onPageClick instanceof Function){this.$element.bind("page",this.options.onPageClick)}var h=(typeof this.$element.prop==="function")?this.$element.prop("tagName"):this.$element.attr("tagName");if(h==="UL"){this.$listContainer=this.$element}else{this.$listContainer=e("<ul></ul>")}this.$listContainer.addClass(this.options.paginationClass);this.$listContainer.append(this.buildListItems(this.currentPages.numeric));if(h!=="UL"){this.$element.append(this.$listContainer)}this.show(this.options.startPage)},show:function(g){if(g<1||g>this.options.totalPages){throw new Error("Page is incorrect.")}switch(this.options.version){case"1.0":this.render(this.getPages_v_1_0(g));break;case"1.1":this.render(this.getPages_v_1_1(g));break;default:this.render(this.getPages_v_1_1(g));break}this.setupEvents();this.$element.trigger("page",g)},buildListItems:function(g){var k=e();var j;var l;if(this.options.first){k=k.add(this.buildItem("first",1))}if(this.options.prev){if(this.options.startPage<=1){l=1}else{l=this.options.startPage-1}k=k.add(this.buildItem("prev",l))}for(var h=0;h<g.length;h++){k=k.add(this.buildItem("page",g[h]))}if(this.options.next){if(this.options.startPage>=this.options.totalPages){j=this.options.totalPages}else{j=this.options.startPage+1}k=k.add(this.buildItem("next",j))}if(this.options.last){k=k.add(this.buildItem("last",this.options.totalPages))}return k},buildItem:function(i,j){var h=e("<li></li>"),k=e("<a></a>"),g=null;h.addClass(i);h.attr("data-page",j);switch(i){case"page":g=j;break;case"first":g=this.options.first;break;case"prev":g=this.options.prev;break;case"next":g=this.options.next;break;case"last":g=this.options.last;break;default:break}h.append(k.attr("href",this.href(j)).text(g));return h},getPages_v_1_0:function(l){var g=[];var k;var m=parseInt(l/this.options.visiblePages,10);if(l%this.options.visiblePages===0){k=(m-1)*this.options.visiblePages+1}else{k=m*this.options.visiblePages+1}var h=Math.min(this.options.totalPages,(k+this.options.visiblePages)-1);for(var j=k;j<=h;j++){g.push(j)}return{currentPage:l,numeric:g}},getPages_v_1_1:function(j){var g=[];var k=Math.floor(this.options.visiblePages/2);var l=j-k+1-this.options.visiblePages%2;var h=j+k;if(l<=0){l=1;h=this.options.visiblePages}if(h>this.options.totalPages){l=this.options.totalPages-this.options.visiblePages+1;h=this.options.totalPages}var i=l;while(i<=h){g.push(i);i++}return{currentPage:j,numeric:g}},render:function(g){if(!this.equals(this.currentPages.numeric,g.numeric)){this.$listContainer.children().remove();this.$listContainer.append(this.buildListItems(g.numeric));this.currentPages=g}this.$listContainer.find(".page").removeClass("active");this.$listContainer.find(".page").filter('[data-page="'+g.currentPage+'"]').addClass("active");this.$listContainer.find(".first").toggleClass("disabled",g.currentPage===1);this.$listContainer.find(".last").toggleClass("disabled",g.currentPage===this.options.totalPages);var i=g.currentPage-1;this.$listContainer.find(".prev").toggleClass("disabled",g.currentPage===1).data("page",i>1?i:1);var h=g.currentPage+1;this.$listContainer.find(".next").toggleClass("disabled",g.currentPage===this.options.totalPages).data("page",h<this.options.totalPages?h:this.options.totalPages)},setupEvents:function(){var g=this;this.$listContainer.find("li").each(function(){var h=e(this);h.off();if(h.hasClass("disabled")||h.hasClass("active")){return}h.click(function(){g.show(parseInt(h.data("page"),10))})})},equals:function(j,g){var h=0;while((h<j.length)||(h<g.length)){if(j[h]!==g[h]){return false}h++}return true},href:function(g){return this.options.href.replace(this.options.hrefVariable,g)}};e.fn.twbsPagination=function(i){var h=Array.prototype.slice.call(arguments,1);var j;var g=this.each(function(){var m=e(this);var l=m.data("twbs-pagination");var k=typeof i==="object"&&i;if(!l){m.data("twbs-pagination",(l=new c(this,k)))}if(typeof i==="string"){j=l[i].apply(l,h)}});return(j===f)?g:j};e.fn.twbsPagination.defaults={totalPages:0,startPage:1,visiblePages:5,href:"javascript:void(0);",hrefVariable:"{{number}}",first:"首页",prev:"上一页",next:"下一页",last:"末页",paginationClass:"pagination",onPageClick:null,version:"1.1"};e.fn.twbsPagination.Constructor=c;e.fn.twbsPagination.noConflict=function(){e.fn.twbsPagination=b;return this}})(jQuery,window,document);